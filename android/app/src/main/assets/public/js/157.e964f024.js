(self["webpackChunkhk_bus"]=self["webpackChunkhk_bus"]||[]).push([[157],{9895:function(t,e,n){"use strict";n.d(e,{Uw:function(){return p},fo:function(){return f}});
/*! Capacitor: https://capacitorjs.com/ - MIT License */
const a=t=>{const e=new Map;e.set("web",{name:"web"});const n=t.CapacitorPlatforms||{currentPlatform:{name:"web"},platforms:e},a=(t,e)=>{n.platforms.set(t,e)},o=t=>{n.platforms.has(t)&&(n.currentPlatform=n.platforms.get(t))};return n.addPlatform=a,n.setPlatform=o,n},o=t=>t.CapacitorPlatforms=a(t),i=o("undefined"!==typeof globalThis?globalThis:"undefined"!==typeof self?self:"undefined"!==typeof window?window:"undefined"!==typeof n.g?n.g:{});i.addPlatform,i.setPlatform;var r;(function(t){t["Unimplemented"]="UNIMPLEMENTED",t["Unavailable"]="UNAVAILABLE"})(r||(r={}));class s extends Error{constructor(t,e,n){super(t),this.message=t,this.code=e,this.data=n}}const u=t=>{var e,n;return(null===t||void 0===t?void 0:t.androidBridge)?"android":(null===(n=null===(e=null===t||void 0===t?void 0:t.webkit)||void 0===e?void 0:e.messageHandlers)||void 0===n?void 0:n.bridge)?"ios":"web"},l=t=>{var e,n,a,o,i;const l=t.CapacitorCustomPlatform||null,d=t.Capacitor||{},c=d.Plugins=d.Plugins||{},f=t.CapacitorPlatforms,p=()=>null!==l?l.name:u(t),m=(null===(e=null===f||void 0===f?void 0:f.currentPlatform)||void 0===e?void 0:e.getPlatform)||p,h=()=>"web"!==m(),g=(null===(n=null===f||void 0===f?void 0:f.currentPlatform)||void 0===n?void 0:n.isNativePlatform)||h,w=t=>{const e=M.get(t);return!!(null===e||void 0===e?void 0:e.platforms.has(m()))||!!b(t)},v=(null===(a=null===f||void 0===f?void 0:f.currentPlatform)||void 0===a?void 0:a.isPluginAvailable)||w,y=t=>{var e;return null===(e=d.PluginHeaders)||void 0===e?void 0:e.find((e=>e.name===t))},b=(null===(o=null===f||void 0===f?void 0:f.currentPlatform)||void 0===o?void 0:o.getPluginHeader)||y,_=e=>t.console.error(e),O=(t,e,n)=>Promise.reject(`${n} does not have an implementation of "${e}".`),M=new Map,P=(t,e={})=>{const n=M.get(t);if(n)return console.warn(`Capacitor plugin "${t}" already registered. Cannot register plugins twice.`),n.proxy;const a=m(),o=b(t);let i;const u=async()=>(!i&&a in e?i=i="function"===typeof e[a]?await e[a]():e[a]:null!==l&&!i&&"web"in e&&(i=i="function"===typeof e["web"]?await e["web"]():e["web"]),i),f=(e,n)=>{var i,u;if(!o){if(e)return null===(u=e[n])||void 0===u?void 0:u.bind(e);throw new s(`"${t}" plugin is not implemented on ${a}`,r.Unimplemented)}{const a=null===o||void 0===o?void 0:o.methods.find((t=>n===t.name));if(a)return"promise"===a.rtype?e=>d.nativePromise(t,n.toString(),e):(e,a)=>d.nativeCallback(t,n.toString(),e,a);if(e)return null===(i=e[n])||void 0===i?void 0:i.bind(e)}},p=e=>{let n;const o=(...o)=>{const i=u().then((i=>{const u=f(i,e);if(u){const t=u(...o);return n=null===t||void 0===t?void 0:t.remove,t}throw new s(`"${t}.${e}()" is not implemented on ${a}`,r.Unimplemented)}));return"addListener"===e&&(i.remove=async()=>n()),i};return o.toString=()=>`${e.toString()}() { [capacitor code] }`,Object.defineProperty(o,"name",{value:e,writable:!1,configurable:!1}),o},h=p("addListener"),g=p("removeListener"),w=(t,e)=>{const n=h({eventName:t},e),a=async()=>{const a=await n;g({eventName:t,callbackId:a},e)},o=new Promise((t=>n.then((()=>t({remove:a})))));return o.remove=async()=>{console.warn("Using addListener() without 'await' is deprecated."),await a()},o},v=new Proxy({},{get(t,e){switch(e){case"$$typeof":return;case"toJSON":return()=>({});case"addListener":return o?w:h;case"removeListener":return g;default:return p(e)}}});return c[t]=v,M.set(t,{name:t,proxy:v,platforms:new Set([...Object.keys(e),...o?[a]:[]])}),v},k=(null===(i=null===f||void 0===f?void 0:f.currentPlatform)||void 0===i?void 0:i.registerPlugin)||P;return d.convertFileSrc||(d.convertFileSrc=t=>t),d.getPlatform=m,d.handleError=_,d.isNativePlatform=g,d.isPluginAvailable=v,d.pluginMethodNoop=O,d.registerPlugin=k,d.Exception=s,d.DEBUG=!!d.DEBUG,d.isLoggingEnabled=!!d.isLoggingEnabled,d.platform=d.getPlatform(),d.isNative=d.isNativePlatform(),d},d=t=>t.Capacitor=l(t),c=d("undefined"!==typeof globalThis?globalThis:"undefined"!==typeof self?self:"undefined"!==typeof window?window:"undefined"!==typeof n.g?n.g:{}),f=c.registerPlugin;c.Plugins;class p{constructor(t){this.listeners={},this.windowListeners={},t&&(console.warn(`Capacitor WebPlugin "${t.name}" config object was deprecated in v3 and will be removed in v4.`),this.config=t)}addListener(t,e){const n=this.listeners[t];n||(this.listeners[t]=[]),this.listeners[t].push(e);const a=this.windowListeners[t];a&&!a.registered&&this.addWindowListener(a);const o=async()=>this.removeListener(t,e),i=Promise.resolve({remove:o});return Object.defineProperty(i,"remove",{value:async()=>{console.warn("Using addListener() without 'await' is deprecated."),await o()}}),i}async removeAllListeners(){this.listeners={};for(const t in this.windowListeners)this.removeWindowListener(this.windowListeners[t]);this.windowListeners={}}notifyListeners(t,e){const n=this.listeners[t];n&&n.forEach((t=>t(e)))}hasListeners(t){return!!this.listeners[t].length}registerWindowListener(t,e){this.windowListeners[e]={registered:!1,windowEventName:t,pluginEventName:e,handler:t=>{this.notifyListeners(e,t)}}}unimplemented(t="not implemented"){return new c.Exception(t,r.Unimplemented)}unavailable(t="not available"){return new c.Exception(t,r.Unavailable)}async removeListener(t,e){const n=this.listeners[t];if(!n)return;const a=n.indexOf(e);this.listeners[t].splice(a,1),this.listeners[t].length||this.removeWindowListener(this.windowListeners[t])}addWindowListener(t){window.addEventListener(t.windowEventName,t.handler),t.registered=!0}removeWindowListener(t){t&&(window.removeEventListener(t.windowEventName,t.handler),t.registered=!1)}}const m=t=>encodeURIComponent(t).replace(/%(2[346B]|5E|60|7C)/g,decodeURIComponent).replace(/[()]/g,escape),h=t=>t.replace(/(%[\dA-F]{2})+/gi,decodeURIComponent);class g extends p{async getCookies(){const t=document.cookie,e={};return t.split(";").forEach((t=>{if(t.length<=0)return;let[n,a]=t.replace(/=/,"CAP_COOKIE").split("CAP_COOKIE");n=h(n).trim(),a=h(a).trim(),e[n]=a})),e}async setCookie(t){try{const e=m(t.key),n=m(t.value),a=`; expires=${(t.expires||"").replace("expires=","")}`,o=(t.path||"/").replace("path=",""),i=null!=t.url&&t.url.length>0?`domain=${t.url}`:"";document.cookie=`${e}=${n||""}${a}; path=${o}; ${i};`}catch(e){return Promise.reject(e)}}async deleteCookie(t){try{document.cookie=`${t.key}=; Max-Age=0`}catch(e){return Promise.reject(e)}}async clearCookies(){try{const t=document.cookie.split(";")||[];for(const e of t)document.cookie=e.replace(/^ +/,"").replace(/=.*/,`=;expires=${(new Date).toUTCString()};path=/`)}catch(t){return Promise.reject(t)}}async clearAllCookies(){try{await this.clearCookies()}catch(t){return Promise.reject(t)}}}f("CapacitorCookies",{web:()=>new g});const w=async t=>new Promise(((e,n)=>{const a=new FileReader;a.onload=()=>{const t=a.result;e(t.indexOf(",")>=0?t.split(",")[1]:t)},a.onerror=t=>n(t),a.readAsDataURL(t)})),v=(t={})=>{const e=Object.keys(t),n=Object.keys(t).map((t=>t.toLocaleLowerCase())),a=n.reduce(((n,a,o)=>(n[a]=t[e[o]],n)),{});return a},y=(t,e=!0)=>{if(!t)return null;const n=Object.entries(t).reduce(((t,n)=>{const[a,o]=n;let i,r;return Array.isArray(o)?(r="",o.forEach((t=>{i=e?encodeURIComponent(t):t,r+=`${a}=${i}&`})),r.slice(0,-1)):(i=e?encodeURIComponent(o):o,r=`${a}=${i}`),`${t}&${r}`}),"");return n.substr(1)},b=(t,e={})=>{const n=Object.assign({method:t.method||"GET",headers:t.headers},e),a=v(t.headers),o=a["content-type"]||"";if("string"===typeof t.data)n.body=t.data;else if(o.includes("application/x-www-form-urlencoded")){const e=new URLSearchParams;for(const[n,a]of Object.entries(t.data||{}))e.set(n,a);n.body=e.toString()}else if(o.includes("multipart/form-data")){const e=new FormData;if(t.data instanceof FormData)t.data.forEach(((t,n)=>{e.append(n,t)}));else for(const n of Object.keys(t.data))e.append(n,t.data[n]);n.body=e;const a=new Headers(n.headers);a.delete("content-type"),n.headers=a}else(o.includes("application/json")||"object"===typeof t.data)&&(n.body=JSON.stringify(t.data));return n};class _ extends p{async request(t){const e=b(t,t.webFetchExtra),n=y(t.params,t.shouldEncodeUrlParams),a=n?`${t.url}?${n}`:t.url,o=await fetch(a,e),i=o.headers.get("content-type")||"";let r,s,{responseType:u="text"}=o.ok?t:{};switch(i.includes("application/json")&&(u="json"),u){case"arraybuffer":case"blob":s=await o.blob(),r=await w(s);break;case"json":r=await o.json();break;case"document":case"text":default:r=await o.text()}const l={};return o.headers.forEach(((t,e)=>{l[e]=t})),{data:r,headers:l,status:o.status,url:o.url}}async get(t){return this.request(Object.assign(Object.assign({},t),{method:"GET"}))}async post(t){return this.request(Object.assign(Object.assign({},t),{method:"POST"}))}async put(t){return this.request(Object.assign(Object.assign({},t),{method:"PUT"}))}async patch(t){return this.request(Object.assign(Object.assign({},t),{method:"PATCH"}))}async delete(t){return this.request(Object.assign(Object.assign({},t),{method:"DELETE"}))}}f("CapacitorHttp",{web:()=>new _})},3658:function(t,e,n){"use strict";var a=n(9781),o=n(3157),i=TypeError,r=Object.getOwnPropertyDescriptor,s=a&&!function(){if(void 0!==this)return!0;try{Object.defineProperty([],"length",{writable:!1}).length=1}catch(t){return t instanceof TypeError}}();t.exports=s?function(t,e){if(o(t)&&!r(t,"length").writable)throw i("Cannot set read only .length");return t.length=e}:function(t,e){return t.length=e}},7207:function(t){var e=TypeError,n=9007199254740991;t.exports=function(t){if(t>n)throw e("Maximum allowed index exceeded");return t}},3157:function(t,e,n){var a=n(4326);t.exports=Array.isArray||function(t){return"Array"==a(t)}},7658:function(t,e,n){"use strict";var a=n(2109),o=n(7908),i=n(6244),r=n(3658),s=n(7207),u=n(7293),l=u((function(){return 4294967297!==[].push.call({length:4294967296},1)})),d=function(){try{Object.defineProperty([],"length",{writable:!1}).push()}catch(t){return t instanceof TypeError}},c=l||!d();a({target:"Array",proto:!0,arity:1,forced:c},{push:function(t){var e=o(this),n=i(e),a=arguments.length;s(n+a);for(var u=0;u<a;u++)e[n]=arguments[u],n++;return r(e,n),n}})},4868:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e["default"]=void 0;var a=u(n(420)),o=u(n(6594)),i=u(n(451)),r=u(n(7672)),s=n(4057);function u(t){return t&&t.__esModule?t:{default:t}}var l=function(t,e,n){var u=arguments.length>3&&void 0!==arguments[3]?arguments[3]:6371e3,l=(0,a.default)(t),d=(0,o.default)(t),c=e/u,f=(0,i.default)(n),p=(0,i.default)(l),m=(0,i.default)(d),h=Math.asin(Math.sin(p)*Math.cos(c)+Math.cos(p)*Math.sin(c)*Math.cos(f)),g=m+Math.atan2(Math.sin(f)*Math.sin(c)*Math.cos(p),Math.cos(c)-Math.sin(p)*Math.sin(h)),w=(0,r.default)(g);return(w<s.MINLON||w>s.MAXLON)&&(g=(g+3*Math.PI)%(2*Math.PI)-Math.PI,w=(0,r.default)(g)),{latitude:(0,r.default)(h),longitude:w}},d=l;e["default"]=d},4057:function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.areaConversion=e.timeConversion=e.distanceConversion=e.altitudeKeys=e.latitudeKeys=e.longitudeKeys=e.MAXLON=e.MINLON=e.MAXLAT=e.MINLAT=e.earthRadius=e.sexagesimalPattern=void 0;var n=/^([0-9]{1,3})°\s*([0-9]{1,3}(?:\.(?:[0-9]{1,}))?)['′]\s*(([0-9]{1,3}(\.([0-9]{1,}))?)["″]\s*)?([NEOSW]?)$/;e.sexagesimalPattern=n;var a=6378137;e.earthRadius=a;var o=-90;e.MINLAT=o;var i=90;e.MAXLAT=i;var r=-180;e.MINLON=r;var s=180;e.MAXLON=s;var u=["lng","lon","longitude",0];e.longitudeKeys=u;var l=["lat","latitude",1];e.latitudeKeys=l;var d=["alt","altitude","elevation","elev",2];e.altitudeKeys=d;var c={m:1,km:.001,cm:100,mm:1e3,mi:1/1609.344,sm:1/1852.216,ft:100/30.48,in:100/2.54,yd:1/.9144};e.distanceConversion=c;var f={m:60,h:3600,d:86400};e.timeConversion=f;var p={m2:1,km2:1e-6,ha:1e-4,a:.01,ft2:10.763911,yd2:1.19599,in2:1550.0031};e.areaConversion=p,p.sqm=p.m2,p.sqkm=p.km2,p.sqft=p.ft2,p.sqyd=p.yd2,p.sqin=p.in2},5241:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e["default"]=void 0;var a=n(4057),o=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"m",n=a.areaConversion[e];if(n)return t*n;throw new Error("Invalid unit used for area conversion.")},i=o;e["default"]=i},4638:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e["default"]=void 0;var a=n(4057),o=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"m",n=a.distanceConversion[e];if(n)return t*n;throw new Error("Invalid unit used for distance conversion.")},i=o;e["default"]=i},55:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e["default"]=void 0;var a=n(4057),o=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"kmh";switch(e){case"kmh":return t*a.timeConversion.h*a.distanceConversion.km;case"mph":return t*a.timeConversion.h*a.distanceConversion.mi;default:return t}},i=o;e["default"]=i},8412:function(t,e){"use strict";function n(t,e){return s(t)||r(t,e)||o(t,e)||a()}function a(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function o(t,e){if(t){if("string"===typeof t)return i(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?i(t,e):void 0}}function i(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,a=new Array(e);n<e;n++)a[n]=t[n];return a}function r(t,e){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(t)){var n=[],a=!0,o=!1,i=void 0;try{for(var r,s=t[Symbol.iterator]();!(a=(r=s.next()).done);a=!0)if(n.push(r.value),e&&n.length===e)break}catch(u){o=!0,i=u}finally{try{a||null==s["return"]||s["return"]()}finally{if(o)throw i}}return n}}function s(t){if(Array.isArray(t))return t}Object.defineProperty(e,"__esModule",{value:!0}),e["default"]=void 0;var u=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:4,n=Math.pow(10,e);return Math.round(t*n)/n},l=function(t){var e=t.toString().split("."),a=n(e,2),o=a[0],i=a[1],r=Math.abs(Number(o)),s=60*Number("0."+(i||0)),l=s.toString().split("."),d=Math.floor(s),c=u(60*Number("0."+(l[1]||0))).toString(),f=c.split("."),p=n(f,2),m=p[0],h=p[1],g=void 0===h?"0":h;return r+"° "+d.toString().padStart(2,"0")+"' "+m.padStart(2,"0")+"."+g.padEnd(1,"0")+'"'},d=l;e["default"]=d},6789:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e["default"]=void 0;var a=o(n(6620));function o(t){return t&&t.__esModule?t:{default:t}}var i=function(t,e){return(0,a.default)(t,e)[0]},r=i;e["default"]=r},8317:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e["default"]=void 0;var a=s(n(451)),o=s(n(420)),i=s(n(6594)),r=n(4057);function s(t){return t&&t.__esModule?t:{default:t}}var u=function(t){var e=0;if(t.length>2){for(var n,s,u,l=0;l<t.length;l++){l===t.length-2?(n=t.length-2,s=t.length-1,u=0):l===t.length-1?(n=t.length-1,s=0,u=1):(n=l,s=l+1,u=l+2);var d=(0,i.default)(t[n]),c=(0,o.default)(t[s]),f=(0,i.default)(t[u]);e+=((0,a.default)(f)-(0,a.default)(d))*Math.sin((0,a.default)(c))}e=e*r.earthRadius*r.earthRadius/2}return Math.abs(e)},l=u;e["default"]=l},3954:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e["default"]=void 0;var a=i(n(420)),o=i(n(6594));function i(t){return t&&t.__esModule?t:{default:t}}var r=function(t){if(!1===Array.isArray(t)||0===t.length)throw new Error("No points were given.");return t.reduce((function(t,e){var n=(0,a.default)(e),i=(0,o.default)(e);return{maxLat:Math.max(n,t.maxLat),minLat:Math.min(n,t.minLat),maxLng:Math.max(i,t.maxLng),minLng:Math.min(i,t.minLng)}}),{maxLat:-1/0,minLat:1/0,maxLng:-1/0,minLng:1/0})},s=r;e["default"]=s},6914:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e["default"]=void 0;var a=u(n(420)),o=u(n(6594)),i=u(n(451)),r=u(n(7672)),s=n(4057);function u(t){return t&&t.__esModule?t:{default:t}}var l=function(t,e){var n,u,l=(0,a.default)(t),d=(0,o.default)(t),c=(0,i.default)(l),f=(0,i.default)(d),p=e/s.earthRadius,m=c-p,h=c+p,g=(0,i.default)(s.MAXLAT),w=(0,i.default)(s.MINLAT),v=(0,i.default)(s.MAXLON),y=(0,i.default)(s.MINLON);if(m>w&&h<g){var b=Math.asin(Math.sin(p)/Math.cos(c));n=f-b,n<y&&(n+=2*Math.PI),u=f+b,u>v&&(u-=2*Math.PI)}else m=Math.max(m,w),h=Math.min(h,g),n=y,u=v;return[{latitude:(0,r.default)(m),longitude:(0,r.default)(n)},{latitude:(0,r.default)(h),longitude:(0,r.default)(u)}]},d=l;e["default"]=d},2219:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e["default"]=void 0;var a=s(n(420)),o=s(n(6594)),i=s(n(451)),r=s(n(7672));function s(t){return t&&t.__esModule?t:{default:t}}var u=function(t){if(!1===Array.isArray(t)||0===t.length)return!1;var e=t.length,n=t.reduce((function(t,e){var n=(0,i.default)((0,a.default)(e)),r=(0,i.default)((0,o.default)(e));return{X:t.X+Math.cos(n)*Math.cos(r),Y:t.Y+Math.cos(n)*Math.sin(r),Z:t.Z+Math.sin(n)}}),{X:0,Y:0,Z:0}),s=n.X/e,u=n.Y/e,l=n.Z/e;return{longitude:(0,r.default)(Math.atan2(u,s)),latitude:(0,r.default)(Math.atan2(l,Math.sqrt(s*s+u*u)))}},l=u;e["default"]=l},5146:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e["default"]=void 0;var a=o(n(3954));function o(t){return t&&t.__esModule?t:{default:t}}var i=function(t){var e=(0,a.default)(t),n=e.minLat+(e.maxLat-e.minLat)/2,o=e.minLng+(e.maxLng-e.minLng)/2;return{latitude:parseFloat(n.toFixed(6)),longitude:parseFloat(o.toFixed(6))}},r=i;e["default"]=r},9816:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e["default"]=void 0;var a=o(n(2392));function o(t){return t&&t.__esModule?t:{default:t}}var i=function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:a.default,o="function"===typeof n?n(t,e):(0,a.default)(t,e);if(isNaN(o))throw new Error("Could not calculate bearing for given points. Check your bearing function");switch(Math.round(o/22.5)){case 1:return"NNE";case 2:return"NE";case 3:return"ENE";case 4:return"E";case 5:return"ESE";case 6:return"SE";case 7:return"SSE";case 8:return"S";case 9:return"SSW";case 10:return"SW";case 11:return"WSW";case 12:return"W";case 13:return"WNW";case 14:return"NW";case 15:return"NNW";default:return"N"}},r=i;e["default"]=r},4179:function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e["default"]=void 0;var n=function(t,e){return e.reduce((function(e,n){if("undefined"===typeof t||null===t)throw new Error("'".concat(t,"' is no valid coordinate."));return Object.prototype.hasOwnProperty.call(t,n)&&"undefined"!==typeof n&&"undefined"===typeof e?(e=n,n):e}),void 0)},a=n;e["default"]=a},5456:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e["default"]=void 0;var a=n(4057),o=i(n(4179));function i(t){return t&&t.__esModule?t:{default:t}}function r(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);e&&(a=a.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,a)}return n}function s(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?r(Object(n),!0).forEach((function(e){u(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):r(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function u(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var l=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{longitude:a.longitudeKeys,latitude:a.latitudeKeys,altitude:a.altitudeKeys},n=(0,o.default)(t,e.longitude),i=(0,o.default)(t,e.latitude),r=(0,o.default)(t,e.altitude);return s({latitude:i,longitude:n},r?{altitude:r}:{})},d=l;e["default"]=d},691:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e["default"]=void 0;var a=u(n(420)),o=u(n(6594)),i=u(n(451)),r=u(n(6533)),s=n(4057);function u(t){return t&&t.__esModule?t:{default:t}}var l=function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;n="undefined"===typeof n||isNaN(n)?1:n;var u=(0,a.default)(t),l=(0,o.default)(t),d=(0,a.default)(e),c=(0,o.default)(e),f=Math.acos((0,r.default)(Math.sin((0,i.default)(d))*Math.sin((0,i.default)(u))+Math.cos((0,i.default)(d))*Math.cos((0,i.default)(u))*Math.cos((0,i.default)(l)-(0,i.default)(c))))*s.earthRadius;return Math.round(f/n)*n},d=l;e["default"]=d},6947:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e["default"]=void 0;var a=i(n(691)),o=i(n(6533));function i(t){return t&&t.__esModule?t:{default:t}}var r=function(t,e,n){var i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1,r=(0,a.default)(e,t,i),s=(0,a.default)(t,n,i),u=(0,a.default)(e,n,i),l=Math.acos((0,o.default)((r*r+u*u-s*s)/(2*r*u))),d=Math.acos((0,o.default)((s*s+u*u-r*r)/(2*s*u)));return l>Math.PI/2?r:d>Math.PI/2?s:Math.sin(l)*r},s=r;e["default"]=s},5043:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e["default"]=void 0;var a=s(n(420)),o=s(n(6594)),i=s(n(451)),r=s(n(7672));function s(t){return t&&t.__esModule?t:{default:t}}var u=function(t,e){var n=(0,a.default)(e),s=(0,o.default)(e),u=(0,a.default)(t),l=(0,o.default)(t),d=((0,r.default)(Math.atan2(Math.sin((0,i.default)(s)-(0,i.default)(l))*Math.cos((0,i.default)(n)),Math.cos((0,i.default)(u))*Math.sin((0,i.default)(n))-Math.sin((0,i.default)(u))*Math.cos((0,i.default)(n))*Math.cos((0,i.default)(s)-(0,i.default)(l))))+360)%360;return d},l=u;e["default"]=l},420:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e["default"]=void 0;var a=n(4057),o=r(n(4179)),i=r(n(8290));function r(t){return t&&t.__esModule?t:{default:t}}var s=function(t,e){var n=(0,o.default)(t,a.latitudeKeys);if("undefined"!==typeof n&&null!==n){var r=t[n];return!0===e?r:(0,i.default)(r)}},u=s;e["default"]=u},6594:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e["default"]=void 0;var a=n(4057),o=r(n(4179)),i=r(n(8290));function r(t){return t&&t.__esModule?t:{default:t}}var s=function(t,e){var n=(0,o.default)(t,a.longitudeKeys);if("undefined"!==typeof n&&null!==n){var r=t[n];return!0===e?r:(0,i.default)(r)}},u=s;e["default"]=u},6037:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e["default"]=void 0;var a=o(n(691));function o(t){return t&&t.__esModule?t:{default:t}}function i(t){return i="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"===typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},i(t)}var r=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:a.default;return t.reduce((function(t,n){return"object"===i(t)&&null!==t.last&&(t.distance+=e(n,t.last)),t.last=n,t}),{last:null,distance:0}).distance},s=r;e["default"]=s},4288:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e["default"]=void 0;var a=s(n(420)),o=s(n(6594)),i=s(n(451)),r=n(4057);function s(t){return t&&t.__esModule?t:{default:t}}var u=function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;n="undefined"===typeof n||isNaN(n)?1:n;var s,u,l,d,c,f,p,m=(0,a.default)(t),h=(0,o.default)(t),g=(0,a.default)(e),w=(0,o.default)(e),v=6356752.314245,y=1/298.257223563,b=(0,i.default)(w-h),_=Math.atan((1-y)*Math.tan((0,i.default)(parseFloat(m)))),O=Math.atan((1-y)*Math.tan((0,i.default)(parseFloat(g)))),M=Math.sin(_),P=Math.cos(_),k=Math.sin(O),I=Math.cos(O),j=b,S=100;do{var W=Math.sin(j),$=Math.cos(j);if(f=Math.sqrt(I*W*(I*W)+(P*k-M*I*$)*(P*k-M*I*$)),0===f)return 0;s=M*k+P*I*$,u=Math.atan2(f,s),l=P*I*W/f,d=1-l*l,c=s-2*M*k/d,isNaN(c)&&(c=0);var N=y/16*d*(4+y*(4-3*d));p=j,j=b+(1-N)*y*l*(u+N*f*(c+N*s*(2*c*c-1)))}while(Math.abs(j-p)>1e-12&&--S>0);if(0===S)return NaN;var L=d*(r.earthRadius*r.earthRadius-v*v)/(v*v),C=1+L/16384*(4096+L*(L*(320-175*L)-768)),D=L/1024*(256+L*(L*(74-47*L)-128)),E=D*f*(c+D/4*(s*(2*c*c-1)-D/6*c*(4*f*f-3)*(4*c*c-3))),x=v*C*(u-E);return Math.round(x/n)*n},l=u;e["default"]=l},2392:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e["default"]=void 0;var a=s(n(420)),o=s(n(6594)),i=s(n(451)),r=s(n(7672));function s(t){return t&&t.__esModule?t:{default:t}}var u=function(t,e){var n=(0,i.default)((0,o.default)(e))-(0,i.default)((0,o.default)(t)),s=Math.log(Math.tan((0,i.default)((0,a.default)(e))/2+Math.PI/4)/Math.tan((0,i.default)((0,a.default)(t))/2+Math.PI/4));return Math.abs(n)>Math.PI&&(n=n>0?-1*(2*Math.PI-n):2*Math.PI+n),((0,r.default)(Math.atan2(n,s))+360)%360},l=u;e["default"]=l},4866:function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e["default"]=void 0;var n=function(t){return/^(NNE|NE|NNW|N)$/.test(t)?"N":/^(ENE|E|ESE|SE)$/.test(t)?"E":/^(SSE|S|SSW|SW)$/.test(t)?"S":/^(WSW|W|WNW|NW)$/.test(t)?"W":void 0},a=n;e["default"]=a},1554:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e["default"]=void 0;var a=o(n(691));function o(t){return t&&t.__esModule?t:{default:t}}var i=function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:a.default,o=n(t,e),i=Number(e.time)-Number(t.time),r=o/i*1e3;return r},r=i;e["default"]=r},7698:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a={computeDestinationPoint:!0,convertArea:!0,convertDistance:!0,convertSpeed:!0,decimalToSexagesimal:!0,findNearest:!0,getAreaOfPolygon:!0,getBounds:!0,getBoundsOfDistance:!0,getCenter:!0,getCenterOfBounds:!0,getCompassDirection:!0,getCoordinateKey:!0,getCoordinateKeys:!0,getDistance:!0,getDistanceFromLine:!0,getGreatCircleBearing:!0,getLatitude:!0,getLongitude:!0,getPathLength:!0,getPreciseDistance:!0,getRhumbLineBearing:!0,getRoughCompassDirection:!0,getSpeed:!0,isDecimal:!0,isPointInLine:!0,isPointInPolygon:!0,isPointNearLine:!0,isPointWithinRadius:!0,isSexagesimal:!0,isValidCoordinate:!0,isValidLatitude:!0,isValidLongitude:!0,orderByDistance:!0,sexagesimalToDecimal:!0,toDecimal:!0,toRad:!0,toDeg:!0,wktToPolygon:!0};Object.defineProperty(e,"computeDestinationPoint",{enumerable:!0,get:function(){return o.default}}),Object.defineProperty(e,"convertArea",{enumerable:!0,get:function(){return i.default}}),Object.defineProperty(e,"convertDistance",{enumerable:!0,get:function(){return r.default}}),Object.defineProperty(e,"convertSpeed",{enumerable:!0,get:function(){return s.default}}),Object.defineProperty(e,"decimalToSexagesimal",{enumerable:!0,get:function(){return u.default}}),Object.defineProperty(e,"findNearest",{enumerable:!0,get:function(){return l.default}}),Object.defineProperty(e,"getAreaOfPolygon",{enumerable:!0,get:function(){return d.default}}),Object.defineProperty(e,"getBounds",{enumerable:!0,get:function(){return c.default}}),Object.defineProperty(e,"getBoundsOfDistance",{enumerable:!0,get:function(){return f.default}}),Object.defineProperty(e,"getCenter",{enumerable:!0,get:function(){return p.default}}),Object.defineProperty(e,"getCenterOfBounds",{enumerable:!0,get:function(){return m.default}}),Object.defineProperty(e,"getCompassDirection",{enumerable:!0,get:function(){return h.default}}),Object.defineProperty(e,"getCoordinateKey",{enumerable:!0,get:function(){return g.default}}),Object.defineProperty(e,"getCoordinateKeys",{enumerable:!0,get:function(){return w.default}}),Object.defineProperty(e,"getDistance",{enumerable:!0,get:function(){return v.default}}),Object.defineProperty(e,"getDistanceFromLine",{enumerable:!0,get:function(){return y.default}}),Object.defineProperty(e,"getGreatCircleBearing",{enumerable:!0,get:function(){return b.default}}),Object.defineProperty(e,"getLatitude",{enumerable:!0,get:function(){return _.default}}),Object.defineProperty(e,"getLongitude",{enumerable:!0,get:function(){return O.default}}),Object.defineProperty(e,"getPathLength",{enumerable:!0,get:function(){return M.default}}),Object.defineProperty(e,"getPreciseDistance",{enumerable:!0,get:function(){return P.default}}),Object.defineProperty(e,"getRhumbLineBearing",{enumerable:!0,get:function(){return k.default}}),Object.defineProperty(e,"getRoughCompassDirection",{enumerable:!0,get:function(){return I.default}}),Object.defineProperty(e,"getSpeed",{enumerable:!0,get:function(){return j.default}}),Object.defineProperty(e,"isDecimal",{enumerable:!0,get:function(){return S.default}}),Object.defineProperty(e,"isPointInLine",{enumerable:!0,get:function(){return W.default}}),Object.defineProperty(e,"isPointInPolygon",{enumerable:!0,get:function(){return $.default}}),Object.defineProperty(e,"isPointNearLine",{enumerable:!0,get:function(){return N.default}}),Object.defineProperty(e,"isPointWithinRadius",{enumerable:!0,get:function(){return L.default}}),Object.defineProperty(e,"isSexagesimal",{enumerable:!0,get:function(){return C.default}}),Object.defineProperty(e,"isValidCoordinate",{enumerable:!0,get:function(){return D.default}}),Object.defineProperty(e,"isValidLatitude",{enumerable:!0,get:function(){return E.default}}),Object.defineProperty(e,"isValidLongitude",{enumerable:!0,get:function(){return x.default}}),Object.defineProperty(e,"orderByDistance",{enumerable:!0,get:function(){return A.default}}),Object.defineProperty(e,"sexagesimalToDecimal",{enumerable:!0,get:function(){return z.default}}),Object.defineProperty(e,"toDecimal",{enumerable:!0,get:function(){return T.default}}),Object.defineProperty(e,"toRad",{enumerable:!0,get:function(){return B.default}}),Object.defineProperty(e,"toDeg",{enumerable:!0,get:function(){return U.default}}),Object.defineProperty(e,"wktToPolygon",{enumerable:!0,get:function(){return q.default}});var o=H(n(4868)),i=H(n(5241)),r=H(n(4638)),s=H(n(55)),u=H(n(8412)),l=H(n(6789)),d=H(n(8317)),c=H(n(3954)),f=H(n(6914)),p=H(n(2219)),m=H(n(5146)),h=H(n(9816)),g=H(n(4179)),w=H(n(5456)),v=H(n(691)),y=H(n(6947)),b=H(n(5043)),_=H(n(420)),O=H(n(6594)),M=H(n(6037)),P=H(n(4288)),k=H(n(2392)),I=H(n(4866)),j=H(n(1554)),S=H(n(7182)),W=H(n(1521)),$=H(n(813)),N=H(n(8e3)),L=H(n(3741)),C=H(n(1496)),D=H(n(43)),E=H(n(2807)),x=H(n(6749)),A=H(n(6620)),z=H(n(6160)),T=H(n(8290)),B=H(n(451)),U=H(n(7672)),q=H(n(9553)),R=n(4057);function H(t){return t&&t.__esModule?t:{default:t}}Object.keys(R).forEach((function(t){"default"!==t&&"__esModule"!==t&&(Object.prototype.hasOwnProperty.call(a,t)||Object.defineProperty(e,t,{enumerable:!0,get:function(){return R[t]}}))}))},7182:function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e["default"]=void 0;var n=function(t){var e=t.toString().trim();return!isNaN(parseFloat(e))&&parseFloat(e)===Number(e)},a=n;e["default"]=a},1521:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e["default"]=void 0;var a=o(n(691));function o(t){return t&&t.__esModule?t:{default:t}}var i=function(t,e,n){return(0,a.default)(e,t)+(0,a.default)(t,n)===(0,a.default)(e,n)},r=i;e["default"]=r},813:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e["default"]=void 0;var a=i(n(420)),o=i(n(6594));function i(t){return t&&t.__esModule?t:{default:t}}var r=function(t,e){for(var n=!1,i=e.length,r=-1,s=i-1;++r<i;s=r)((0,o.default)(e[r])<=(0,o.default)(t)&&(0,o.default)(t)<(0,o.default)(e[s])||(0,o.default)(e[s])<=(0,o.default)(t)&&(0,o.default)(t)<(0,o.default)(e[r]))&&(0,a.default)(t)<((0,a.default)(e[s])-(0,a.default)(e[r]))*((0,o.default)(t)-(0,o.default)(e[r]))/((0,o.default)(e[s])-(0,o.default)(e[r]))+(0,a.default)(e[r])&&(n=!n);return n},s=r;e["default"]=s},8e3:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e["default"]=void 0;var a=o(n(6947));function o(t){return t&&t.__esModule?t:{default:t}}var i=function(t,e,n,o){return(0,a.default)(t,e,n)<o},r=i;e["default"]=r},3741:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e["default"]=void 0;var a=o(n(691));function o(t){return t&&t.__esModule?t:{default:t}}var i=function(t,e,n){var o=.01;return(0,a.default)(t,e,o)<n},r=i;e["default"]=r},1496:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e["default"]=void 0;var a=n(4057),o=function(t){return a.sexagesimalPattern.test(t.toString().trim())},i=o;e["default"]=i},43:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e["default"]=void 0;var a=r(n(5456)),o=r(n(2807)),i=r(n(6749));function r(t){return t&&t.__esModule?t:{default:t}}var s=function(t){var e=(0,a.default)(t),n=e.latitude,r=e.longitude;if(Array.isArray(t)&&t.length>=2)return(0,i.default)(t[0])&&(0,o.default)(t[1]);if("undefined"===typeof n||"undefined"===typeof r)return!1;var s=t[r],u=t[n];return"undefined"!==typeof u&&"undefined"!==typeof s&&(!1!==(0,o.default)(u)&&!1!==(0,i.default)(s))},u=s;e["default"]=u},2807:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e["default"]=void 0;var a=s(n(7182)),o=s(n(1496)),i=s(n(6160)),r=n(4057);function s(t){return t&&t.__esModule?t:{default:t}}var u=function t(e){return(0,a.default)(e)?!(parseFloat(e)>r.MAXLAT||e<r.MINLAT):!!(0,o.default)(e)&&t((0,i.default)(e))},l=u;e["default"]=l},6749:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e["default"]=void 0;var a=s(n(7182)),o=s(n(1496)),i=s(n(6160)),r=n(4057);function s(t){return t&&t.__esModule?t:{default:t}}var u=function t(e){return(0,a.default)(e)?!(parseFloat(e)>r.MAXLON||e<r.MINLON):!!(0,o.default)(e)&&t((0,i.default)(e))},l=u;e["default"]=l},6620:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e["default"]=void 0;var a=o(n(691));function o(t){return t&&t.__esModule?t:{default:t}}var i=function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:a.default;return n="function"===typeof n?n:a.default,e.slice().sort((function(e,a){return n(t,e)-n(t,a)}))},r=i;e["default"]=r},6533:function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e["default"]=void 0;var n=function(t){return t>1?1:t<-1?-1:t},a=n;e["default"]=a},6160:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e["default"]=void 0;var a=n(4057),o=function(t){var e=new RegExp(a.sexagesimalPattern).exec(t.toString().trim());if("undefined"===typeof e||null===e)throw new Error("Given value is not in sexagesimal format");var n=Number(e[2])/60||0,o=Number(e[4])/3600||0,i=parseFloat(e[1])+n+o;return["S","W"].includes(e[7])?-i:i},i=o;e["default"]=i},8290:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e["default"]=void 0;var a=u(n(7182)),o=u(n(1496)),i=u(n(6160)),r=u(n(43)),s=u(n(5456));function u(t){return t&&t.__esModule?t:{default:t}}function l(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);e&&(a=a.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,a)}return n}function d(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?l(Object(n),!0).forEach((function(e){c(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):l(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function c(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var f=function t(e){if((0,a.default)(e))return Number(e);if((0,o.default)(e))return(0,i.default)(e);if((0,r.default)(e)){var n=(0,s.default)(e);return Array.isArray(e)?e.map((function(e,n){return[0,1].includes(n)?t(e):e})):d(d(d({},e),n.latitude&&c({},n.latitude,t(e[n.latitude]))),n.longitude&&c({},n.longitude,t(e[n.longitude])))}return Array.isArray(e)?e.map((function(e){return(0,r.default)(e)?t(e):e})):e},p=f;e["default"]=p},7672:function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e["default"]=void 0;var n=function(t){return 180*t/Math.PI},a=n;e["default"]=a},451:function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e["default"]=void 0;var n=function(t){return t*Math.PI/180},a=n;e["default"]=a},9553:function(t,e){"use strict";function n(t,e){return s(t)||r(t,e)||o(t,e)||a()}function a(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function o(t,e){if(t){if("string"===typeof t)return i(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?i(t,e):void 0}}function i(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,a=new Array(e);n<e;n++)a[n]=t[n];return a}function r(t,e){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(t)){var n=[],a=!0,o=!1,i=void 0;try{for(var r,s=t[Symbol.iterator]();!(a=(r=s.next()).done);a=!0)if(n.push(r.value),e&&n.length===e)break}catch(u){o=!0,i=u}finally{try{a||null==s["return"]||s["return"]()}finally{if(o)throw i}}return n}}function s(t){if(Array.isArray(t))return t}Object.defineProperty(e,"__esModule",{value:!0}),e["default"]=void 0;var u=function(t){if(!t.startsWith("POLYGON"))throw new Error("Invalid wkt.");var e=t.slice(t.indexOf("(")+2,t.indexOf(")")).split(", "),a=e.map((function(t){var e=t.split(" "),a=n(e,2),o=a[0],i=a[1];return{longitude:parseFloat(o),latitude:parseFloat(i)}}));return a},l=u;e["default"]=l},3978:function(t,e,n){"use strict";n.d(e,{FS:function(){return i}});n(7658),n(8662);var a=n(9483),o=n.n(a);async function i(t){let e=[],n=await o().keys();n=n.filter((e=>0==e.indexOf(t)));for(let a of n){const t=await o().getItem(a);e=[...e,...t]}return e}},7942:function(t,e,n){"use strict";function a(t){return new Promise((e=>{setTimeout(e,t)}))}n.d(e,{Z:function(){return a}})},154:function(t,e,n){"use strict";n.d(e,{Z:function(){return ut}});var a=n(6252),o=n(3577);const i={key:0,class:"ion-margin-start"},r={key:1,class:"ion-margin-start"},s={key:0,class:"ion-margin-start"},u={key:1,class:"ion-margin-start"},l={key:0},d={key:1},c={key:0},f={key:1},p={key:2},m={slot:"fixed",class:"popup-segment"},h={class:"segment-content"},g={key:0},w={key:1},v={key:2,class:"max-size"};function y(t,e,n,y,b,_){const O=(0,a.up)("ion-title"),M=(0,a.up)("ion-icon"),P=(0,a.up)("ion-button"),k=(0,a.up)("ion-buttons"),I=(0,a.up)("ion-toolbar"),j=(0,a.up)("ion-header"),S=(0,a.up)("ion-label"),W=(0,a.up)("ion-segment-button"),$=(0,a.up)("ion-segment"),N=(0,a.up)("SkeletonItems"),L=(0,a.up)("ion-list"),C=(0,a.up)("StopItems"),D=(0,a.up)("RouteInfo"),E=(0,a.up)("LeafletMap"),x=(0,a.up)("ion-content");return(0,a.wg)(),(0,a.iD)(a.HY,null,[(0,a.Wm)(j,null,{default:(0,a.w5)((()=>[(0,a.Wm)(I,null,{default:(0,a.w5)((()=>["bus"==y.item.type||"minibus"==y.item.type?((0,a.wg)(),(0,a.j4)(O,{key:0},{default:(0,a.w5)((()=>[(0,a._)("span",null,(0,o.zw)(y.item.routeNo),1),"zh"===t.$i18next.language?((0,a.wg)(),(0,a.iD)("span",i,(0,o.zw)(y.item.destTC),1)):((0,a.wg)(),(0,a.iD)("span",r,(0,o.zw)(y.item.destEN),1))])),_:1})):"lightRail"==y.item.type?((0,a.wg)(),(0,a.j4)(O,{key:1},{default:(0,a.w5)((()=>[(0,a.Uk)((0,o.zw)(y.item.routeNameEN)+" ",1),"zh"===t.$i18next.language?((0,a.wg)(),(0,a.iD)("span",s,(0,o.zw)(y.item.originTC)+" - "+(0,o.zw)(y.item.destTC),1)):((0,a.wg)(),(0,a.iD)("span",u,(0,o.zw)(y.item.originEN)+" - "+(0,o.zw)(y.item.destEN),1))])),_:1})):((0,a.wg)(),(0,a.j4)(O,{key:2,class:"marquee"},{default:(0,a.w5)((()=>["zh"===t.$i18next.language?((0,a.wg)(),(0,a.iD)("span",l,(0,o.zw)(y.item.routeNameTC),1)):((0,a.wg)(),(0,a.iD)("span",d,(0,o.zw)(y.item.routeNameEN),1))])),_:1})),(0,a.Wm)(k,{slot:"start",class:"top-buttons"},{default:(0,a.w5)((()=>[(0,a.Wm)(P,{onClick:_.closeModal},{default:(0,a.w5)((()=>[(0,a.Wm)(M,{icon:y.chevronBack},null,8,["icon"])])),_:1},8,["onClick"])])),_:1}),(0,a.Wm)(k,{slot:"end",class:"top-buttons"},{default:(0,a.w5)((()=>[y.altRoutes&&1==y.altRoutes.length?((0,a.wg)(),(0,a.iD)("span",c,[(0,a.Wm)(P,{onClick:_.swapDirection},{default:(0,a.w5)((()=>[(0,a.Wm)(M,{icon:y.swapHorizontalOutline},null,8,["icon"])])),_:1},8,["onClick"])])):(0,a.kq)("",!0),y.altRoutes&&y.altRoutes.length>1?((0,a.wg)(),(0,a.iD)("span",f,[(0,a.Wm)(P,{onClick:_.presentActionSheet},{default:(0,a.w5)((()=>[(0,a.Wm)(M,{icon:y.swapHorizontalOutline},null,8,["icon"])])),_:1},8,["onClick"])])):(0,a.kq)("",!0),void 0!=y.starred?((0,a.wg)(),(0,a.iD)("span",p,[_.checkbusStar?((0,a.wg)(),(0,a.j4)(P,{key:0,onClick:_.removeStar},{default:(0,a.w5)((()=>[(0,a.Wm)(M,{icon:y.star},null,8,["icon"])])),_:1},8,["onClick"])):((0,a.wg)(),(0,a.j4)(P,{key:1,onClick:_.addStar},{default:(0,a.w5)((()=>[(0,a.Wm)(M,{icon:y.starOutline},null,8,["icon"])])),_:1},8,["onClick"]))])):(0,a.kq)("",!0)])),_:1})])),_:1})])),_:1}),(0,a.Wm)(x,{ref:"content",class:"ion-padding-bottom"},{default:(0,a.w5)((()=>[(0,a._)("section",m,[(0,a.Wm)($,{modelValue:y.popupView,"onUpdate:modelValue":e[0]||(e[0]=t=>y.popupView=t)},{default:(0,a.w5)((()=>[(0,a.Wm)(W,{value:"default"},{default:(0,a.w5)((()=>[(0,a.Wm)(S,null,{default:(0,a.w5)((()=>[(0,a.Uk)((0,o.zw)(t.$t("etaPopup.frame.upcoming")),1)])),_:1})])),_:1}),"mtr"!=y.item.type&&"lightRail"!=y.item.type?((0,a.wg)(),(0,a.j4)(W,{key:0,value:"info"},{default:(0,a.w5)((()=>[(0,a.Wm)(S,null,{default:(0,a.w5)((()=>[(0,a.Uk)((0,o.zw)(t.$t("etaPopup.frame.info")),1)])),_:1})])),_:1})):(0,a.kq)("",!0),"mtr"!=y.item.type&&"lightRail"!=y.item.type?((0,a.wg)(),(0,a.j4)(W,{key:1,value:"map"},{default:(0,a.w5)((()=>[(0,a.Wm)(S,null,{default:(0,a.w5)((()=>[(0,a.Uk)((0,o.zw)(t.$t("etaPopup.frame.map")),1)])),_:1})])),_:1})):(0,a.kq)("",!0)])),_:1},8,["modelValue"])]),(0,a._)("div",h,["default"==y.popupView?((0,a.wg)(),(0,a.iD)("section",g,[y.popupLoading?((0,a.wg)(),(0,a.j4)(L,{key:0},{default:(0,a.w5)((()=>[(0,a.Wm)(N)])),_:1})):((0,a.wg)(),(0,a.j4)(L,{key:1},{default:(0,a.w5)((()=>[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(y.item.stops,(t=>((0,a.wg)(),(0,a.j4)(C,{key:t.id,stop:t,noEta:y.noEta,class:(0,o.C_)({nearest:_.isNearestStop(t.stopId)}),ref_for:!0,ref:"stopItem"},null,8,["stop","noEta","class"])))),128))])),_:1}))])):(0,a.kq)("",!0),"info"==y.popupView?((0,a.wg)(),(0,a.iD)("section",w,[(0,a.Wm)(D,{item:y.item},null,8,["item"])])):(0,a.kq)("",!0),"map"==y.popupView?((0,a.wg)(),(0,a.iD)("section",v,[(0,a.Wm)(E,{routeLocations:y.item.stops,currentLocation:y.currentLocation},null,8,["routeLocations","currentLocation"])])):(0,a.kq)("",!0)])])),_:1},512)],64)}n(7658);var b=n(2262),_=n(5001),O=n(8903),M=n(7698),P=n(6154);class k{constructor(t,e,n){this.seq=t,this.etas=e,this.note=n}}function I(t,e){return Math.abs(Math.ceil((t-e)/6e4))}async function j(t){let e={status:"",data:[]};try{const n=0==t.specialType?1:t.specialType,a=1==t.direction?"O":"I",o=await(0,P.Z)(`https://data.etabus.gov.hk/v1/transport/kmb/route-eta/${t.routeNo}/${n}`);let i=o.data;i=i.data.filter((t=>t.dir==a)),i.forEach((t=>{let n=e.data.findIndex((e=>e.seq==t.seq));if(t.eta){let a=I(new Date(t.data_timestamp),new Date(t.eta));-1==n?e.data.push(new k(t.seq,[a],"")):e.data[n].etas.push(a)}else-1==n?e.data.push(new k(t.seq,[],"N/A")):e.data[n].note="N/A"}))}catch(n){return console.error(n),e.status="netError",{etaData:e}}return e.data.forEach((t=>{t.etas.sort(((t,e)=>t-e))})),e.status="success",e}async function S(t){let e={status:"",data:[]};try{const n=t.company.includes("CTB")?"CTB":t.company.includes("NWFB")?"NWFB":null;let a=[];a=t.stops[0].altId?t.stops.map((e=>(0,P.Z)(`https://rt.data.gov.hk/v1.1/transport/citybus-nwfb/eta/${n}/${e.altId}/${t.routeNo}`))):t.stops.map((e=>(0,P.Z)(`https://rt.data.gov.hk/v1.1/transport/citybus-nwfb/eta/${n}/${e.stopId}/${t.routeNo}`)));const o=await P.Z.all(a);for(let i of o){let n=i.data.data;if(t.CTBDirection)n=n.filter((e=>e.dir==t.CTBDirection));else{let e=1==t.direction?"O":"I";n=n.filter((t=>t.dir==e))}let a=[];for(let t of n)""!==t.eta&&a.push(I(new Date(t.eta),new Date(t.data_timestamp)));e.data.push({stopId:n[0]?n[0].stop:void 0,etas:a,note:0==a.length?"N/A":""})}return e.status="success",e}catch(n){return console.error(n),e.status="error",e.data=n,e}}async function W(t){let e={status:"",data:[]};try{const{data:n}=await P.Z.post("https://rt.data.gov.hk/v1/transport/mtr/bus/getSchedule",{language:"zh",routeName:t.routeNo});let a=n.busStop;for(let t of a){let n=[];for(let e=0;e<3;e++)if(t.bus[e]){let a=108e3==t.bus[e].arrivalTimeInSecond?Math.floor(t.bus[e].departureTimeInSecond/60):Math.floor(t.bus[e].arrivalTimeInSecond/60);a=a<0?0:a,n.push(a)}e.data.push({stationId:t.busStopId,etas:n,note:0==n.length?"N/A":""})}return e.status="success",e}catch(n){return console.error(n),e.status="error",e.data=n,e}}async function $(t){let e={status:"",data:[]};try{const n=t.routeId,a=t.stops.map((t=>t.stopId));let o=a.map((t=>{if(""!=t)return(0,P.Z)(`https://rt.data.gov.hk/v2/transport/nlb/stop.php?action=estimatedArrivals&routeId=${n}&stopId=${t}&language=zh`)}));o=await P.Z.all(o);for(let t of o){let n=/stopId\=.*\&/,a=t.config.url.match(n)[0].replace("stopId=","").replace("&",""),o=[];for(let e of t.data.estimatedArrivals)if(e){let t=I(new Date(e.estimatedArrivalTime),new Date(e.generateTime));o.push(t)}e.data.push({stopId:a,etas:o,note:0==o.length?"N/A":""})}return e.status="success",e}catch(n){return e.status="fail",e}}async function N(t){let e={status:"",data:[]};try{const n=t.routeId,a=t.direction;let o=t.stops.map((t=>(0,P.Z)(`https://data.etagmb.gov.hk/eta/route-stop/${n}/${a}/${t.seq}`)));o=await P.Z.all(o);for(let t of o){let n=[],a=t.data.data.eta,o=t.data.data.stop_id;for(let t of a)n.push(t.diff);e.data.push({stopId:o,etas:n,note:0==n.length?"N/A":""})}return e.status="success",e}catch(n){return console.error(n),e.status="failed",e.data=n,e}}async function L(t){let e={status:"",data:[]};try{const n=t.routeId,a=t.direction;let o=t.stops.map((t=>(0,P.Z)(`https://rt.data.gov.hk/v1/transport/mtr/getSchedule.php?line=${n}&sta=${t.code}`)));o=await P.Z.all(o);let i="";for(let t of o){let o=[],r=t.config.url.match(/sta\=.*$/)[0].replace("sta=",""),s=[];if(t.data.error?i=t.data.error.errorMsg:t.data.data&&(s=1==a?t.data.data[`${n}-${r}`]["DOWN"]:t.data.data[`${n}-${r}`]["UP"]),s)for(let t of s)o.push(t.ttnt);o=o.slice(0,3),e.data.push({stopId:r,etas:o,note:0==o.length?"N/A":""})}return e.status=""==i?"success":"api-error",e.memo=i,e}catch(n){return console.error(n),e.status="failed",e.data=n,e}}async function C(t,e="https://api.12a.app/hk-transport/"){let n={status:"",data:[]};const{routeId:a,direction:o}=t;try{let t=await(0,P.Z)(`lightRailEta?routeNo=${a}&direction=${o}`,{baseURL:e});return n.status="success",n.data=t.data,console.log(n),n}catch(i){return console.error(i),n.status="failed",n.data=i,n}}const D={class:"ion-margin-start"},E={class:"ion-margin-start"};function x(t,e,n,o,i,r){const s=(0,a.up)("ion-skeleton-text"),u=(0,a.up)("ion-col"),l=(0,a.up)("ion-row"),d=(0,a.up)("ion-grid"),c=(0,a.up)("ion-item");return(0,a.wg)(),(0,a.iD)(a.HY,null,(0,a.Ko)(10,(t=>(0,a.Wm)(c,null,{default:(0,a.w5)((()=>[(0,a.Wm)(d,null,{default:(0,a.w5)((()=>[(0,a.Wm)(l,{class:"ion-align-items-center"},{default:(0,a.w5)((()=>[(0,a.Wm)(u,{"size-xs":"2","size-md":"2"},{default:(0,a.w5)((()=>[(0,a._)("h5",D,[(0,a.Wm)(s,{animated:!0,style:{width:"80%"}})])])),_:1}),(0,a.Wm)(u,{"size-xs":"7","size-md":"7"},{default:(0,a.w5)((()=>[(0,a._)("h5",E,[(0,a.Wm)(s,{animated:!0,style:{width:"80%"}})])])),_:1}),(0,a.Wm)(u,{"size-xs":"3","size-md":"3"})])),_:1})])),_:1})])),_:1}))),64)}var A={name:"SkeletonItems",components:{IonGrid:_.jY,IonRow:_.Nd,IonCol:_.wI,IonItem:_.Ie,IonSkeletonText:_.CK}},z=n(3744);const T=(0,z.Z)(A,[["render",x]]);var B=T;const U={class:"ion-margin-start highlight"},q={key:0,class:"ion-margin-start highlight"},R={key:1,class:"ion-margin-start highlight"},H={key:0,class:"ion-margin-start highlight"},F={key:1,class:"ion-margin-start highlight"},Z={key:0},K={key:1},V={key:2},G=(0,a._)("br",null,null,-1);function Y(t,e,n,i,r,s){const u=(0,a.up)("ion-col"),l=(0,a.up)("ion-text"),d=(0,a.up)("ion-spinner"),c=(0,a.up)("ion-row"),f=(0,a.up)("ion-grid"),p=(0,a.up)("ion-item");return(0,a.wg)(),(0,a.j4)(p,null,{default:(0,a.w5)((()=>[(0,a.Wm)(f,null,{default:(0,a.w5)((()=>[(0,a.Wm)(c,{class:"ion-align-items-center"},{default:(0,a.w5)((()=>[(0,a.Wm)(u,{"size-xs":"2","size-md":"2"},{default:(0,a.w5)((()=>[(0,a._)("h5",U,(0,o.zw)(parseInt(i.stop.seq)),1)])),_:1}),i.noEta?((0,a.wg)(),(0,a.j4)(u,{key:0,"size-xs":"10","size-md":"10"},{default:(0,a.w5)((()=>["zh"===t.$i18next.language?((0,a.wg)(),(0,a.iD)("h5",q,(0,o.zw)(i.stop.nameTC),1)):((0,a.wg)(),(0,a.iD)("h5",R,(0,o.zw)(i.stop.nameEN),1))])),_:1})):((0,a.wg)(),(0,a.j4)(u,{key:1,"size-xs":"7","size-md":"7"},{default:(0,a.w5)((()=>["zh"===t.$i18next.language?((0,a.wg)(),(0,a.iD)("h5",H,(0,o.zw)(i.stop.nameTC),1)):((0,a.wg)(),(0,a.iD)("h5",F,(0,o.zw)(i.stop.nameEN),1))])),_:1})),i.noEta?(0,a.kq)("",!0):((0,a.wg)(),(0,a.j4)(u,{key:2,"size-xs":"3","size-md":"3",class:"ion-no-margin ion-text-right"},{default:(0,a.w5)((()=>["N/A"==i.stop.etaMessage?((0,a.wg)(),(0,a.iD)("div",Z,[(0,a.Wm)(l,{color:"medium"},{default:(0,a.w5)((()=>[(0,a._)("span",null,(0,o.zw)(t.$t("etaPopup.upcoming.noService")),1)])),_:1})])):"loading"==i.stop.etaMessage?((0,a.wg)(),(0,a.iD)("div",K,[(0,a.Wm)(d,{color:"primary"})])):i.stop.etas.length>0?((0,a.wg)(),(0,a.iD)("div",V,[(0,a.Wm)(l,null,{default:(0,a.w5)((()=>[(0,a._)("span",null,(0,o.zw)(i.stop.etas.join(", ")),1),G,(0,a._)("span",null,(0,o.zw)(t.$t("common.minute")),1)])),_:1})])):(0,a.kq)("",!0)])),_:1}))])),_:1})])),_:1})])),_:1})}var J={name:"StopItems",components:{IonGrid:_.jY,IonRow:_.Nd,IonCol:_.wI,IonItem:_.Ie,IonSpinner:_.PQ,IonText:_.yW},props:["stop","noEta"],emits:["getETA"],setup(t){const e=(0,b.iH)(t.stop),n=(0,b.iH)(t.noEta);return{stop:e,noEta:n}}};const X=(0,z.Z)(J,[["render",Y]]);var Q=X;function tt(t,e,n,i,r,s){const u=(0,a.up)("ion-col"),l=(0,a.up)("ion-row"),d=(0,a.up)("ion-grid"),c=(0,a.up)("ion-item"),f=(0,a.up)("ion-icon"),p=(0,a.up)("ion-card-title"),m=(0,a.up)("ion-text"),h=(0,a.up)("ion-card-content"),g=(0,a.up)("ion-card"),w=(0,a.up)("ion-list");return(0,a.wg)(),(0,a.j4)(w,null,{default:(0,a.w5)((()=>[(0,a.Wm)(c,null,{default:(0,a.w5)((()=>[(0,a.Wm)(d,null,{default:(0,a.w5)((()=>[(0,a.Wm)(l,null,{default:(0,a.w5)((()=>[(0,a.Wm)(u,{size:"6",class:"ion-text-left"},{default:(0,a.w5)((()=>[(0,a.Uk)((0,o.zw)(t.$t("etaPopup.info.journeyTime")),1)])),_:1}),(0,a.Wm)(u,{size:"6",class:"ion-text-right"},{default:(0,a.w5)((()=>[(0,a.Uk)((0,o.zw)(`${t.item.journeyTime} ${t.$t("common.minute")}`),1)])),_:1})])),_:1})])),_:1})])),_:1}),(0,a.Wm)(c,null,{default:(0,a.w5)((()=>[(0,a.Wm)(d,null,{default:(0,a.w5)((()=>[(0,a.Wm)(l,null,{default:(0,a.w5)((()=>[(0,a.Wm)(u,{size:"6",class:"ion-text-left"},{default:(0,a.w5)((()=>[(0,a.Uk)((0,o.zw)(t.$t("etaPopup.info.fullFare")),1)])),_:1}),(0,a.Wm)(u,{size:"6",class:"ion-text-right"},{default:(0,a.w5)((()=>[(0,a.Uk)("$"+(0,o.zw)(t.item.fullFare),1)])),_:1})])),_:1})])),_:1})])),_:1}),(0,a.Wm)(c,{href:t.item.infoLinkTC,target:"_blank",button:""},{default:(0,a.w5)((()=>[(0,a.Wm)(d,null,{default:(0,a.w5)((()=>[(0,a.Wm)(l,null,{default:(0,a.w5)((()=>[(0,a.Wm)(u,{size:"6",class:"ion-text-left"},{default:(0,a.w5)((()=>[(0,a.Uk)((0,o.zw)(t.$t("etaPopup.info.details")),1)])),_:1}),(0,a.Wm)(u,{size:"6",class:"ion-text-right"},{default:(0,a.w5)((()=>[(0,a.Wm)(f,{icon:t.openOutline},null,8,["icon"])])),_:1})])),_:1})])),_:1})])),_:1},8,["href"]),t.item.timetable?((0,a.wg)(),(0,a.j4)(c,{key:0},{default:(0,a.w5)((()=>[(0,a.Wm)(d,null,{default:(0,a.w5)((()=>[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(t.item.timetable,((e,n)=>((0,a.wg)(),(0,a.j4)(l,{key:n},{default:(0,a.w5)((()=>[(0,a.Wm)(g,{class:"timetable-card ion-padding"},{default:(0,a.w5)((()=>["MF"==e.title?((0,a.wg)(),(0,a.j4)(p,{key:0},{default:(0,a.w5)((()=>[(0,a.Uk)((0,o.zw)(t.$t("etaPopup.info.MF")),1)])),_:1})):"S"==e.title?((0,a.wg)(),(0,a.j4)(p,{key:1},{default:(0,a.w5)((()=>[(0,a.Uk)((0,o.zw)(t.$t("etaPopup.info.S")),1)])),_:1})):"H"==e.title?((0,a.wg)(),(0,a.j4)(p,{key:2},{default:(0,a.w5)((()=>[(0,a.Uk)((0,o.zw)(t.$t("etaPopup.info.H")),1)])),_:1})):"D"==e.title?((0,a.wg)(),(0,a.j4)(p,{key:3},{default:(0,a.w5)((()=>[(0,a.Uk)((0,o.zw)(t.$t("etaPopup.info.D")),1)])),_:1})):(0,a.kq)("",!0),(0,a.Wm)(h,null,{default:(0,a.w5)((()=>[(0,a.Wm)(d,null,{default:(0,a.w5)((()=>[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(e.details,((t,e)=>((0,a.wg)(),(0,a.j4)(l,{key:`detail-${e}`},{default:(0,a.w5)((()=>[t.period?((0,a.wg)(),(0,a.j4)(u,{key:0,size:"6",class:"ion-text-left"},{default:(0,a.w5)((()=>[(0,a.Wm)(m,null,{default:(0,a.w5)((()=>[(0,a.Uk)((0,o.zw)(t.period),1)])),_:2},1024)])),_:2},1024)):(0,a.kq)("",!0),t.freq?((0,a.wg)(),(0,a.j4)(u,{key:1,size:"6",class:"ion-text-right"},{default:(0,a.w5)((()=>[(0,a.Wm)(m,null,{default:(0,a.w5)((()=>[(0,a.Uk)((0,o.zw)(t.freq),1)])),_:2},1024)])),_:2},1024)):(0,a.kq)("",!0)])),_:2},1024)))),128))])),_:2},1024)])),_:2},1024)])),_:2},1024)])),_:2},1024)))),128))])),_:1})])),_:1})):(0,a.kq)("",!0)])),_:1})}var et=(0,a.aZ)({name:"RouteInfo",components:{IonList:_.q_,IonItem:_.Ie,IonGrid:_.jY,IonRow:_.Nd,IonCol:_.wI,IonText:_.yW,IonCard:_.PM,IonCardTitle:_.Dq,IonCardContent:_.FN,IonIcon:_.gu},props:["item"],setup(t){const e=(0,b.iH)(t.item);return{item:e,openOutline:O.gmo}}});const nt=(0,z.Z)(et,[["render",tt],["__scopeId","data-v-14b37502"]]);var at=nt,ot=n(1556),it=n(6009),rt={name:"ETAPopup",components:{IonHeader:_.Gu,IonTitle:_.wd,IonContent:_.W2,IonList:_.q_,IonLabel:_.Q$,IonIcon:_.gu,IonButton:_.YG,IonButtons:_.Sm,IonSegment:_.cJ,IonSegmentButton:_.GO,IonToolbar:_.sr,LeafletMap:ot.Z,SkeletonItems:B,StopItems:Q,RouteInfo:at},props:["item","starred","noEta","altRoutes"],emits:["closeModal","addStar","removeStar","swapDirection"],setup(t){const e=(0,b.iH)(!1),n=(0,b.iH)({...t.item}),o=(0,b.iH)("default"),i=(0,b.iH)(t.starred),r=(0,b.iH)(t.altRoutes),s=(0,b.iH)(t.noEta),u=(0,b.iH)(),l=(0,b.iH)(),d=(0,b.iH)(null),c=(0,a.f3)("globalConfig");return{popupLoading:e,item:n,starred:i,popupView:o,altRoutes:r,currentLocation:u,nearestStop:l,noEta:s,stopItem:d,chevronBack:O.Mny,starOutline:O.i6c,star:O.h_b,swapHorizontalOutline:O._hl,injectConfig:c}},async mounted(){this.noEta&&(0,it.Z)("info",this.$t("toast.noEta")),"bus"===this.item.type&&1==this.item.company.length&&(this.item.company.includes("KMB")||this.item.company.includes("LWB"))?(this.getKMB(),this.interval=setInterval((async()=>await this.getKMB()),1e4)):"bus"===this.item.type&&1==this.item.company.length&&(this.item.company.includes("CTB")||this.item.company.includes("NWFB"))?(this.getCTB(),this.interval=setInterval((async()=>await this.getCTB()),1e4)):"bus"===this.item.type&&this.item.company.length>=2?(this.getMultiple(),this.interval=setInterval((async()=>await this.getMultiple()),1e4)):"bus"===this.item.type&&this.item.company.includes("LRTFeeder")?(this.getMtrBus(),this.interval=setInterval((async()=>await this.getMtrBus()),1e4)):"bus"===this.item.type&&this.item.company.includes("NLB")?(this.getNLB(),this.interval=setInterval((async()=>await this.getNLB()),1e4)):"minibus"===this.item.type?(this.getMinibus(),this.interval=setInterval((async()=>await this.getMinibus()),1e4)):"mtr"===this.item.type&&(this.getMtr(),this.interval=setInterval((async()=>await this.getMtr()),1e4)),"lightRail"===this.item.type&&this.getLightRail(),navigator.geolocation.getCurrentPosition(this.onLocationSuccess,this.onLocationFail,{enableHighAccuracy:!0})},computed:{checkbusStar(){if(this.starred){let t=[...this.starred];if(0==t.length)return!1;{let e=t.findIndex((t=>t.routeId==this.item.routeId&&t.direction==this.item.direction));return-1!=e}}return!1}},methods:{closeModal(){this.$emit("closeModal")},addStar(){this.$emit("addStar")},removeStar(){this.$emit("removeStar")},swapDirection(){this.$emit("swapDirection",this.altRoutes[0])},onLocationSuccess(t){this.currentLocation=t;const e=this.item.stops.map((t=>{if(t.coord&&t.coord.length>0){const e=this.currentLocation.coords.latitude,n=this.currentLocation.coords.longitude,a=t.coord[1],o=t.coord[0];return{id:t.stopId,distance:(0,M.getDistance)({latitude:e,longitude:n},{latitude:a,longitude:o})}}return{distance:9999999}}));if(this.nearestStop=e.reduce(((t,e)=>e.distance<t.distance?e:t)),this.nearestStop&&this.nearestStop.distance<1e3){let t=this.item.stops.findIndex((t=>t.stopId==this.nearestStop.id));if(-1!=t&&this.$refs.stopItem){let e=this.$refs.stopItem[0].$el.clientHeight;this.$refs.content.$el.scrollToPoint(0,e*t-e/2,500)}}},onLocationFail(){(0,it.Z)("error",this.$i18next.t("toast.locationFail"))},populateETABySeq(t){"success"==t.status&&t.data.length>0&&t.data.forEach((t=>{const e=this.item.stops.findIndex((e=>e.seq==t.seq));-1!=e&&(this.item.stops[e].etaMessage=t.note,this.item.stops[e].etas=[...t.etas])}))},populateETAById(t){"success"==t.status&&t.data.length>0&&t.data.forEach((t=>{let e;e=this.item.stops[0].altId?this.item.stops.findIndex((e=>e.altId===t.stopId)):this.item.stops.findIndex((e=>e.stopId==t.stopId||e.stopId==t.stationId)),-1!=e&&(this.item.stops[e].etaMessage=t.note,this.item.stops[e].etas=[...t.etas])}))},async getKMB(){const t=await j(this.item);this.populateETABySeq(t)},async getCTB(){const t=await S(this.item);this.populateETAById(t)},async getLightRail(){const t=""===this.injectConfig.apiBaseUrl?void 0:this.injectConfig.apiBaseUrl,e=await C(this.item,t);this.populateETAById(e)},async getMultiple(){const t=j(this.item),e=S(this.item);let n=await Promise.all([t,e]),[a,o]=n,i=[];if("success"===a.status)for(let r of a.data){let t=r.etas.map((t=>({tag:"KMB",eta:t,note:r.note})));i.push({seq:r.seq,data:t})}if("success"===o.status){const t=this.item.company.includes("CTB")?"CTB":"NWFB";for(let e of o.data){let n=this.item.stops.findIndex((t=>t.altId==e.stopId));if(-1!=n){let a=this.item.stops[n].seq,o=i.findIndex((t=>t.seq==a)),r=e.etas.map((n=>({tag:t,eta:n,note:e.note})));-1!=o?i[o].data=[...i[o].data,...r]:i.push({seq:a,data:r})}}}for(let r of i)r.data.sort(((t,e)=>t.eta-e.eta));console.log(i);for(let r=0;r<i.length;r++){let t=i[r],e=this.item.stops.findIndex((e=>e.seq==t.seq));if(-1!=e){let n=t.data.map((t=>t.eta));n.length>0?this.item.stops[e].etas=n.slice(0,3):this.item.stops[e].etaMessage="N/A"}}},async getMtrBus(){const t=await W(this.item);this.populateETAById(t)},async getNLB(){const t=await $(this.item);this.populateETAById(t)},async getMinibus(){const t=await N(this.item);this.populateETAById(t)},async getMtr(){const t=await L(this.item);"success"==t.status&&t.data.length>0?t.data.forEach((t=>{const e=this.item.stops.findIndex((e=>e.code==t.stopId));-1!=e&&(this.item.stops[e].etaMessage=t.note,this.item.stops[e].etas=[...t.etas])})):"api-error"==t.status&&(0,it.Z)("error",t.memo)},async presentActionSheet(){const t=this.altRoutes.map((t=>"zh"===this.$i18next.language?{text:`${t.originTC} →  ${t.destTC}`,data:t}:{text:`${t.originEN} →  ${t.destEN}`,data:t})),e=await _.BO.create({header:this.$t("etaPopup.frame.otherDirection"),buttons:t});await e.present();const{data:n}=await e.onDidDismiss();this.$emit("swapDirection",n)},isNearestStop(t){return!!(this.nearestStop&&this.nearestStop.id===t&&this.nearestStop.distance<=1e3)}},beforeUnmount(){clearInterval(this.interval)}};const st=(0,z.Z)(rt,[["render",y]]);var ut=st},1809:function(t,e,n){"use strict";n.d(e,{Z:function(){return $}});var a=n(6252),o=n(3577);const i=(0,a._)("h5",null,"語言 / Language",-1),r={key:0},s={key:1},u={key:0},l={key:1},d={key:2},c={key:0},f={key:1},p={key:2},m=(0,a._)("p",null,"GPLv3",-1),h={class:"ion-text-wrap"},g=(0,a._)("p",null,"https://12a.app",-1);function w(t,e,n,w,v,y){const b=(0,a.up)("ion-title"),_=(0,a.up)("ion-icon"),O=(0,a.up)("ion-button"),M=(0,a.up)("ion-buttons"),P=(0,a.up)("ion-toolbar"),k=(0,a.up)("ion-header"),I=(0,a.up)("ion-label"),j=(0,a.up)("ion-list-header"),S=(0,a.up)("ion-item"),W=(0,a.up)("ion-input"),$=(0,a.up)("ion-checkbox"),N=(0,a.up)("ion-list"),L=(0,a.up)("ion-content");return(0,a.wg)(),(0,a.iD)(a.HY,null,[(0,a.Wm)(k,null,{default:(0,a.w5)((()=>[(0,a.Wm)(P,null,{default:(0,a.w5)((()=>[(0,a.Wm)(b,null,{default:(0,a.w5)((()=>[(0,a.Uk)((0,o.zw)(t.$t("option.title")),1)])),_:1}),(0,a.Wm)(M,{slot:"start"},{default:(0,a.w5)((()=>[(0,a.Wm)(O,{onClick:y.closeOption},{default:(0,a.w5)((()=>[(0,a.Wm)(_,{icon:w.chevronBack},null,8,["icon"])])),_:1},8,["onClick"])])),_:1})])),_:1})])),_:1}),(0,a.Wm)(L,{class:"ion-padding-bottom"},{default:(0,a.w5)((()=>[(0,a.Wm)(j,null,{default:(0,a.w5)((()=>[(0,a.Wm)(I,null,{default:(0,a.w5)((()=>[(0,a.Uk)((0,o.zw)(t.$t("option.basic")),1)])),_:1})])),_:1}),(0,a.Wm)(N,null,{default:(0,a.w5)((()=>[(0,a.Wm)(S,{button:"",onClick:y.presentLangAction},{default:(0,a.w5)((()=>[(0,a.Wm)(_,{icon:w.languageOutline,slot:"start"},null,8,["icon"]),(0,a.Wm)(I,null,{default:(0,a.w5)((()=>[i,"zh"==w.config.lang?((0,a.wg)(),(0,a.iD)("p",r,"正體中文")):"en"==w.config.lang?((0,a.wg)(),(0,a.iD)("p",s,"English")):(0,a.kq)("",!0)])),_:1})])),_:1},8,["onClick"]),(0,a.Wm)(S,{button:"",onClick:y.presentThemeAction},{default:(0,a.w5)((()=>[(0,a.Wm)(_,{icon:w.colorPaletteOutline,slot:"start"},null,8,["icon"]),(0,a.Wm)(I,null,{default:(0,a.w5)((()=>[(0,a._)("h5",null,(0,o.zw)(t.$t("option.theme")),1),"light"==w.config.theme?((0,a.wg)(),(0,a.iD)("p",u,(0,o.zw)(t.$t("option.light")),1)):"dark"==w.config.theme?((0,a.wg)(),(0,a.iD)("p",l,(0,o.zw)(t.$t("option.dark")),1)):"system"==w.config.theme?((0,a.wg)(),(0,a.iD)("p",d,(0,o.zw)(t.$t("option.systemTheme")),1)):(0,a.kq)("",!0)])),_:1})])),_:1},8,["onClick"]),(0,a.Wm)(S,{button:"",onClick:y.presentSourceAction},{default:(0,a.w5)((()=>[(0,a.Wm)(_,{icon:w.serverOutline,slot:"start"},null,8,["icon"]),(0,a.Wm)(I,null,{default:(0,a.w5)((()=>[(0,a._)("h5",null,(0,o.zw)(t.$t("option.dataSource")),1),"default"==w.config.fetchMethod?((0,a.wg)(),(0,a.iD)("p",c,(0,o.zw)(t.$t("option.defaultSource")),1)):"hkgov"==w.config.fetchMethod?((0,a.wg)(),(0,a.iD)("p",f,(0,o.zw)(t.$t("option.govApi")),1)):"self"==w.config.fetchMethod?((0,a.wg)(),(0,a.iD)("p",p,(0,o.zw)(t.$t("option.selfHost")),1)):(0,a.kq)("",!0)])),_:1})])),_:1},8,["onClick"]),"self"==w.config.fetchMethod?((0,a.wg)(),(0,a.j4)(S,{key:0},{default:(0,a.w5)((()=>[(0,a.Wm)(I,{position:"stacked"},{default:(0,a.w5)((()=>[(0,a.Uk)((0,o.zw)(t.$t("option.selfHostUrl")),1)])),_:1}),(0,a.Wm)(W,{placeholder:"https://your.api",modelValue:w.apiBaseUrl,"onUpdate:modelValue":e[0]||(e[0]=t=>w.apiBaseUrl=t)},null,8,["modelValue"])])),_:1})):(0,a.kq)("",!0),(0,a.Wm)(S,null,{default:(0,a.w5)((()=>[(0,a.Wm)(_,{icon:w.returnDownForwardOutline,slot:"start"},null,8,["icon"]),(0,a.Wm)(I,null,{default:(0,a.w5)((()=>[(0,a._)("h5",null,(0,o.zw)(t.$t("option.autoScroll")),1)])),_:1}),(0,a.Wm)($,{slot:"end",modelValue:w.autoScroll,"onUpdate:modelValue":e[1]||(e[1]=t=>w.autoScroll=t)},null,8,["modelValue"])])),_:1})])),_:1}),(0,a.Wm)(j,null,{default:(0,a.w5)((()=>[(0,a.Wm)(I,null,{default:(0,a.w5)((()=>[(0,a.Uk)((0,o.zw)(t.$t("option.manageData")),1)])),_:1})])),_:1}),(0,a.Wm)(N,{class:"ion-padding-bottom ion-margin-bottom"},{default:(0,a.w5)((()=>[(0,a.Wm)(S,{button:"",onClick:y.updateData},{default:(0,a.w5)((()=>[(0,a.Wm)(_,{icon:w.cloudDownloadOutline,slot:"start"},null,8,["icon"]),(0,a.Wm)(I,null,{default:(0,a.w5)((()=>[(0,a._)("h5",null,(0,o.zw)(t.$t("option.updateRoute")),1)])),_:1})])),_:1},8,["onClick"]),(0,a.Wm)(S,{button:"",onClick:y.downloadData},{default:(0,a.w5)((()=>[(0,a.Wm)(_,{icon:w.reloadOutline,slot:"start"},null,8,["icon"]),(0,a.Wm)(I,null,{default:(0,a.w5)((()=>[(0,a._)("h5",null,(0,o.zw)(t.$t("option.reloadRoute")),1)])),_:1})])),_:1},8,["onClick"]),(0,a.Wm)(S,{button:"",onClick:y.clearStarred},{default:(0,a.w5)((()=>[(0,a.Wm)(_,{icon:w.starHalfOutline,slot:"start"},null,8,["icon"]),(0,a.Wm)(I,null,{default:(0,a.w5)((()=>[(0,a._)("h5",null,(0,o.zw)(t.$t("option.removeAllStar")),1)])),_:1})])),_:1},8,["onClick"]),(0,a.Wm)(S,{button:"",onClick:y.confirmClearData},{default:(0,a.w5)((()=>[(0,a.Wm)(_,{icon:w.trashOutline,slot:"start"},null,8,["icon"]),(0,a.Wm)(I,null,{default:(0,a.w5)((()=>[(0,a._)("h5",null,(0,o.zw)(t.$t("option.resetAll")),1)])),_:1})])),_:1},8,["onClick"]),(0,a.Wm)(j,null,{default:(0,a.w5)((()=>[(0,a.Wm)(I,null,{default:(0,a.w5)((()=>[(0,a.Uk)((0,o.zw)(t.$t("option.about")),1)])),_:1})])),_:1}),(0,a.Wm)(S,{button:"",href:"https://www.gnu.org/licenses/gpl-3.0.en.html",target:"_blank"},{default:(0,a.w5)((()=>[(0,a.Wm)(_,{icon:w.bookOutline,slot:"start"},null,8,["icon"]),(0,a.Wm)(I,null,{default:(0,a.w5)((()=>[(0,a._)("h5",null,(0,o.zw)(t.$t("option.license")),1),m])),_:1})])),_:1}),(0,a.Wm)(S,{button:"",href:"https://github.com/angus6b23/hk-transport",target:"_blank"},{default:(0,a.w5)((()=>[(0,a.Wm)(_,{icon:w.codeSlashOutline,slot:"start"},null,8,["icon"]),(0,a.Wm)(I,null,{default:(0,a.w5)((()=>[(0,a._)("h5",null,(0,o.zw)(t.$t("option.sourceCode")),1)])),_:1})])),_:1}),(0,a.Wm)(S,null,{default:(0,a.w5)((()=>[(0,a.Wm)(_,{icon:w.shieldCheckmarkOutline,slot:"start"},null,8,["icon"]),(0,a.Wm)(I,null,{default:(0,a.w5)((()=>[(0,a._)("h5",null,(0,o.zw)(t.$t("option.promise")),1),(0,a._)("p",h,(0,o.zw)(t.$t("option.promiseDescription")),1)])),_:1})])),_:1}),(0,a.Wm)(S,{button:"",href:"https://liberapay.com/12a.app/donate",target:"_blank"},{default:(0,a.w5)((()=>[(0,a.Wm)(_,{icon:w.iceCreamOutline,slot:"start"},null,8,["icon"]),(0,a.Wm)(I,null,{default:(0,a.w5)((()=>[(0,a._)("h5",null,(0,o.zw)(t.$t("option.support")),1),(0,a._)("p",null,(0,o.zw)(t.$t("option.supportDescription")),1)])),_:1})])),_:1}),(0,a.Wm)(S,{button:"",href:"https://12a.app",target:"_blank"},{default:(0,a.w5)((()=>[(0,a.Wm)(_,{icon:w.linkOutline,slot:"start"},null,8,["icon"]),(0,a.Wm)(I,null,{default:(0,a.w5)((()=>[(0,a._)("h5",null,(0,o.zw)(t.$t("option.otherApp")),1),g])),_:1})])),_:1})])),_:1})])),_:1})],64)}n(1703);var v=n(2262),y=n(9895);const b=(0,y.fo)("Dialog",{web:()=>n.e(674).then(n.bind(n,5674)).then((t=>new t.DialogWeb))});var _=n(5001),O=n(8903),M=n(1547),P=n(6009),k=n(9483),I=n.n(k),j={name:"Option-popup",components:{IonHeader:_.Gu,IonTitle:_.wd,IonContent:_.W2,IonList:_.q_,IonListHeader:_.yh,IonLabel:_.Q$,IonItem:_.Ie,IonIcon:_.gu,IonButton:_.YG,IonButtons:_.Sm,IonToolbar:_.sr,IonInput:_.pK,IonCheckbox:_.nz},emits:["closeOption","updateData","downloadData","changeLanguage"],setup(){const t=(0,v.iH)({}),e=(0,v.iH)(""),n=(0,v.iH)(!1),a=document.body;return{chevronBack:O.Mny,linkOutline:O.m5T,codeSlashOutline:O.qkj,shieldCheckmarkOutline:O.nve,languageOutline:O.V2o,iceCreamOutline:O._mM,serverOutline:O.bhR,cloudDownloadOutline:O.V30,reloadOutline:O.Lk3,starHalfOutline:O.NN6,trashOutline:O.gtu,colorPaletteOutline:O.enK,returnDownForwardOutline:O.No0,bookOutline:O.W3$,config:t,apiBaseUrl:e,body:a,autoScroll:n}},async mounted(){this.config=await I().getItem("config"),this.apiBaseUrl=this.config.apiBaseUrl,this.autoScroll=this.config.autoScroll},methods:{closeOption(){this.$emit("closeOption")},async updateApiUrl(){await I().setItem("config",JSON.parse(JSON.stringify(this.config)))},async clearStarred(){const{value:t}=await b.confirm({title:this.$t("option.removeAllStar"),message:this.$t("option.removeAllStarPrompt")});t&&(await I().setItem("starred",[]),(0,P.Z)("info",this.$t("toast.removedStar")))},async confirmClearData(){const{value:t}=await b.confirm({title:this.$t("option.resetAll"),message:this.$t("option.resetAllPrompt")});if(t){let t=await I().keys();for(let e of t)await I().removeItem(e);(0,P.Z)("info",this.$t("toast.resetAll")),setTimeout((()=>{location.replace(location.origin)}),3e3)}},async updateData(){const t=await _.G0.create({message:this.$t("option.updatingData")+'<br><span id="loading-progress"><span>'});try{let e;if(t.present(),e="self"==this.config.fetchMethod?await(0,M.Z)(this.config.apiBaseUrl):await(0,M.Z)(),!e||e instanceof Error)throw new Error(e.message);t.dismiss(),location.replace(location.origin)}catch(e){t.dismiss(),(0,P.Z)("error",this.$t("toast.networkError"))}},async downloadData(){const t=await _.G0.create({message:this.$t("option.redownloadData")+'<br><span id="loading-progress"><span>'});t.present();let e=await I().keys();for(let n of e)"config"!==n&&"starred"!=n&&await I().removeItem(n);"self"==this.config.fetchMethod?await(0,M.Z)(this.config.apiBaseUrl):await(0,M.Z)(),t.dismiss(),location.replace(location.origin)},async presentLangAction(){const t=[{text:"正體中文",data:{action:"zh"}},{text:"English",data:{action:"en"}}],e=await _.BO.create({header:"請選擇語言 / Select Language ",buttons:t});await e.present();const n=await e.onDidDismiss();n.data&&this.config.lang!=n.data.action&&(this.config.lang=n.data.action,this.$i18next.changeLanguage(this.config.lang),await I().setItem("config",JSON.parse(JSON.stringify(this.config))))},async presentSourceAction(){const t=[{text:this.$t("option.defaultSource"),data:{action:"default"}},{text:this.$t("option.selfHost"),data:{action:"self"}}],e=await _.BO.create({header:this.$t("option.selectSource"),buttons:t});await e.present();const n=await e.onDidDismiss();n.data&&this.config.fetchMethod!=n.data.action&&(this.config.fetchMethod=n.data.action,await I().setItem("config",JSON.parse(JSON.stringify(this.config))),await(0,P.Z)("info",this.$t("toast.changeSourceHint")))},async presentThemeAction(){const t=[{text:this.$t("option.systemTheme"),data:{action:"system"}},{text:this.$t("option.light"),data:{action:"light"}},{text:this.$t("option.dark"),data:{action:"dark"}}],e=await _.BO.create({header:this.$t("option.selectTheme"),buttons:t});await e.present();const n=await e.onDidDismiss();n.data&&(this.config.theme=n.data.action,await I().setItem("config",JSON.parse(JSON.stringify(this.config))),"dark"==n.data.action?this.body.classList.toggle("dark",!0):"light"==n.data.action?this.body.classList.toggle("dark",!1):window.matchMedia("(prefers-color-scheme: dark)").matches?this.body.classList.toggle("dark",!0):this.body.classList.toggle("dark",!1))}},watch:{async apiBaseUrl(){this.config={...this.config,apiBaseUrl:this.apiBaseUrl},await I().setItem("config",JSON.parse(JSON.stringify(this.config)))},async autoScroll(){this.config={...this.config,autoScroll:this.autoScroll},await I().setItem("config",JSON.parse(JSON.stringify(this.config)))}}},S=n(3744);const W=(0,S.Z)(j,[["render",w]]);var $=W}}]);
//# sourceMappingURL=157.e964f024.js.map