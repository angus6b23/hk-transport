"use strict";(self["webpackChunkhk_bus"]=self["webpackChunkhk_bus"]||[]).push([[741],{8349:function(t,e,i){i.d(e,{Z:function(){return O}});var o=i(6252),n=i(3577),a=i(9963);const l={key:0,class:"ion-no-margin ion-margin-start ion-padding-vertical"},s={key:1,class:"ion-no-margin ion-margin-start ion-padding-vertical"},d={key:0,class:"ion-no-margin ion-margin-start ion-padding-vertical"},r={key:1,class:"ion-no-margin ion-margin-start ion-padding-vertical"},u={key:0,class:"ion-no-margin ion-margin-start ion-padding-vertical"},c={key:1,class:"ion-no-margin ion-margin-start ion-padding-vertical"};function p(t,e){const i=(0,o.up)("i18next"),p=(0,o.up)("ion-title"),m=(0,o.up)("ion-icon"),w=(0,o.up)("ion-button"),g=(0,o.up)("ion-buttons"),h=(0,o.up)("ion-toolbar"),f=(0,o.up)("ion-header"),k=(0,o.up)("OptionView"),I=(0,o.up)("ion-modal"),y=(0,o.up)("ion-label"),_=(0,o.up)("ion-list-header"),z=(0,o.up)("ion-col"),W=(0,o.up)("ion-row"),O=(0,o.up)("ion-grid"),S=(0,o.up)("ion-item"),C=(0,o.up)("ion-list"),b=(0,o.up)("ion-content"),N=(0,o.up)("ETAPopup"),D=(0,o.up)("ion-page");return(0,o.wg)(),(0,o.j4)(D,null,{default:(0,o.w5)((()=>[(0,o.Wm)(f,null,{default:(0,o.w5)((()=>[(0,o.Wm)(h,null,{default:(0,o.w5)((()=>[(0,o.Wm)(p,null,{default:(0,o.w5)((()=>[(0,o.Wm)(i,{translation:t.$t("listView.title")},{transportType:(0,o.w5)((()=>[(0,o._)("span",null,(0,n.zw)(t.$t(`common.${t.type}`)),1)])),_:1},8,["translation"])])),_:1}),(0,o.Wm)(g,{slot:"end"},{default:(0,o.w5)((()=>[(0,o.Wm)(w,{onClick:t.openOption},{default:(0,o.w5)((()=>[(0,o.Wm)(m,{icon:t.cog},null,8,["icon"])])),_:1},8,["onClick"])])),_:1})])),_:1})])),_:1}),(0,o.Wm)(b,{fullscreen:!0},{default:(0,o.w5)((()=>[(0,o.Wm)(I,{ref:"modal","is-open":t.optionIsOpen,onWillDismiss:t.closeOption},{default:(0,o.w5)((()=>[(0,o.Wm)(k,{onCloseOption:t.closeOption},null,8,["onCloseOption"])])),_:1},8,["is-open","onWillDismiss"]),t.dataReady?((0,o.wg)(),(0,o.j4)(C,{key:0},{default:(0,o.w5)((()=>[(0,o.Wm)(_,null,{default:(0,o.w5)((()=>[(0,o.Wm)(y,{class:"hint"},{default:(0,o.w5)((()=>[(0,o.Uk)((0,n.zw)(t.$t("listView.hint")),1)])),_:1})])),_:1}),((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)(t.data,((e,i)=>((0,o.wg)(),(0,o.iD)("div",{key:e.id},[1==e.direction?((0,o.wg)(),(0,o.j4)(S,{key:0,button:""},{default:(0,o.w5)((()=>[(0,o.Wm)(O,null,{default:(0,o.w5)((()=>["mtr"==e.type?((0,o.wg)(),(0,o.j4)(W,{key:0,class:"open-modal",expand:"block",onClick:e=>t.openModal(i)},{default:(0,o.w5)((()=>[(0,o.Wm)(z,{"size-xs":"3","size-md":"1",class:"route-no ion-align-items-center"},{default:(0,o.w5)((()=>[(0,o._)("div",{class:"line-color-indicator",style:(0,n.j5)({"background-color":"#"+e.color})},null,4)])),_:2},1024),(0,o.Wm)(z,{"size-xs":"9","size-md":"11"},{default:(0,o.w5)((()=>["zh"===t.$i18next.language?((0,o.wg)(),(0,o.iD)("h5",l,(0,n.zw)(e.routeNameTC),1)):((0,o.wg)(),(0,o.iD)("h5",s,(0,n.zw)(e.routeNameEN),1))])),_:2},1024)])),_:2},1032,["onClick"])):(0,o.kq)("",!0),"lightRail"==e.type?((0,o.wg)(),(0,o.j4)(W,{key:1,class:"open-modal",expand:"block",onClick:e=>t.openModal(i)},{default:(0,o.w5)((()=>[(0,o.Wm)(z,{"size-xs":"3","size-md":"1",class:"route-no ion-align-items-center"},{default:(0,o.w5)((()=>[(0,o._)("h5",null,(0,n.zw)(e.routeId),1)])),_:2},1024),(0,o.Wm)(z,{"size-xs":"9","size-md":"11"},{default:(0,o.w5)((()=>["zh"===t.$i18next.language?((0,o.wg)(),(0,o.iD)("h5",d,(0,n.zw)(e.originTC)+" - "+(0,n.zw)(e.destTC),1)):((0,o.wg)(),(0,o.iD)("h5",r,(0,n.zw)(e.originEN)+" - "+(0,n.zw)(e.destEN),1))])),_:2},1024)])),_:2},1032,["onClick"])):(0,o.kq)("",!0),"tram"==e.type?((0,o.wg)(),(0,o.j4)(W,{key:2,class:"open-modal",expand:"block",onClick:e=>t.openModal(i)},{default:(0,o.w5)((()=>[(0,o.Wm)(z,{"size-xs":"8","size-md":"10"},{default:(0,o.w5)((()=>["zh"===t.$i18next.language?((0,o.wg)(),(0,o.iD)("h5",u,(0,n.zw)(e.routeNameTC),1)):((0,o.wg)(),(0,o.iD)("h5",c,(0,n.zw)(e.routeNameEN),1))])),_:2},1024),(0,o.Wm)(z,{"size-xs":"2","size-md":"1",class:"d-flex"},{default:(0,o.w5)((()=>[(0,o.Wm)(w,{onClick:(0,a.iM)((e=>t.openModal(i)),["stop"]),class:"direction1-button direction-button"},{default:(0,o.w5)((()=>[(0,o.Uk)((0,n.zw)(t.$t("listView.westbound")),1)])),_:2},1032,["onClick"])])),_:2},1024),(0,o.Wm)(z,{"size-xs":"2","size-md":"1",class:"d-flex"},{default:(0,o.w5)((()=>[(0,o.Wm)(w,{onClick:(0,a.iM)((e=>t.openAltModal(i)),["stop"]),class:"direction2-button direction-button"},{default:(0,o.w5)((()=>[(0,o.Uk)((0,n.zw)(t.$t("listView.eastbound")),1)])),_:2},1032,["onClick"])])),_:2},1024)])),_:2},1032,["onClick"])):(0,o.kq)("",!0)])),_:2},1024)])),_:2},1024)):(0,o.kq)("",!0)])))),128))])),_:1})):(0,o.kq)("",!0)])),_:1}),(0,o.Wm)(I,{"is-open":t.modalIsOpen,ref:"modal",onWillDismiss:t.closeModal},{default:(0,o.w5)((()=>[(0,o.Wm)(N,{item:t.itemSelected,noEta:t.checkNoEta,altRoutes:t.altRoutes,onCloseModal:t.closeModal,onSwapDirection:t.swapDirection},null,8,["item","noEta","altRoutes","onCloseModal","onSwapDirection"])])),_:1},8,["is-open","onWillDismiss"])])),_:1})}var m=i(2262),w=i(9874),g=i(8903),h=i(3978),f=i(6009),k=i(5994),I=i(5234),y=i(7942),_=(0,o.aZ)({name:"ListView",components:{IonHeader:w.Gu,IonToolbar:w.sr,IonContent:w.W2,IonPage:w._i,IonItem:w.Ie,IonLabel:w.Q$,IonList:w.q_,IonListHeader:w.yh,IonModal:w.ki,IonGrid:w.jY,IonRow:w.Nd,IonCol:w.wI,IonTitle:w.wd,IonIcon:w.gu,IonButtons:w.Sm,IonButton:w.YG,ETAPopup:k.Z,OptionView:I.Z},props:["dataType"],setup(t){const e=(0,m.iH)({}),i=(0,m.iH)(!1),o=(0,m.iH)(!1),n=(0,m.iH)([]),a=(0,m.iH)(t.dataType),l=(0,m.iH)(!1),s=(0,m.iH)([]);return addEventListener("ionModalDidDismiss",(function(){i.value=!1})),{data:n,itemSelected:e,altRoutes:s,modalIsOpen:i,optionIsOpen:o,type:a,dataReady:l,cog:g.Mjo}},methods:{openModal(t){this.itemSelected=JSON.parse(JSON.stringify(this.data[t])),this.getAltRoutes(),console.log(this.itemSelected),this.modalIsOpen=!0},openAltModal(t){let e=this.data[t],i=this.data.findIndex((t=>t.routeId==e.routeId&&t.direction!=e.direction));-1!=i?this.openModal(i):((0,f.Z)("info","未找到相關方向，正在顯示順行"),this.openModal(t))},closeModal(){this.modalIsOpen=!1},openOption(){this.optionIsOpen=!0},closeOption(){this.optionIsOpen=!1},currentSelectedItem(t){return t.routeId==this.itemSelected.routeId&&t.routeDirection==this.itemSelected.routeDirection},getAltRoutes(){"tram"==this.type?this.altRoutes=JSON.parse(JSON.stringify(this.data.filter((t=>t.routeNo==this.itemSelected.routeNo&&t.direction!=this.itemSelected.direction)))):"mtr"!=this.type&&"lightRail"!=this.type||(this.altRoutes=JSON.parse(JSON.stringify(this.data.filter((t=>t.routeId==this.itemSelected.routeId&&t.direction!=this.itemSelected.direction)))))},async swapDirection(t=void 0){t?(this.modalIsOpen=!1,await(0,y.Z)(100),this.itemSelected=JSON.parse(JSON.stringify(t)),this.getAltRoutes(),this.modalIsOpen=!0,console.log(this.itemSelected)):(0,f.Z)("error","此路線未有對頭車")}},async mounted(){this.data=await(0,h.FS)(this.type),this.dataReady=!0},computed:{checkNoEta(){return"ferry"==this.type||"tram"==this.type}}}),z=i(3744);const W=(0,z.Z)(_,[["render",p],["__scopeId","data-v-e52138da"]]);var O=W},8680:function(t,e,i){i.r(e),i.d(e,{default:function(){return r}});var o=i(6252);function n(t,e,i,n,a,l){const s=(0,o.up)("ListView");return(0,o.wg)(),(0,o.j4)(s,{dataType:"mtr"})}var a=i(8349),l=(0,o.aZ)({name:"mtr",components:{ListView:a.Z}}),s=i(3744);const d=(0,s.Z)(l,[["render",n]]);var r=d}}]);
//# sourceMappingURL=741.e524f716.js.map