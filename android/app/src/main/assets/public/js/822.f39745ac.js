"use strict";(self["webpackChunkhk_transport"]=self["webpackChunkhk_transport"]||[]).push([[822],{9921:function(e,t,o){o.d(t,{Z:function(){return wt}});var a=o(6252),i=o(3577);const n={key:0,class:"star-wrapper"},s={key:2},l={key:3,class:"no-content"};function r(e,t){const o=(0,a.up)("i18next"),r=(0,a.up)("ion-title"),d=(0,a.up)("ion-icon"),c=(0,a.up)("ion-button"),u=(0,a.up)("ion-buttons"),p=(0,a.up)("ion-toolbar"),m=(0,a.up)("ion-searchbar"),w=(0,a.up)("Keypad"),g=(0,a.up)("ion-progress-bar"),y=(0,a.up)("ion-header"),h=(0,a.up)("ion-label"),k=(0,a.up)("ion-list-header"),f=(0,a.up)("RegularSearchItems"),b=(0,a.up)("CompactSearchItemsLeft"),_=(0,a.up)("CompactSearchItemsRight"),C=(0,a.up)("DetailSearchItems"),z=(0,a.up)("ion-reorder-group"),I=(0,a.up)("ion-text"),N=(0,a.up)("ion-list"),W=(0,a.up)("ion-content"),$=(0,a.up)("ETAPopup"),M=(0,a.up)("ion-modal"),S=(0,a.up)("OptionView"),O=(0,a.up)("News"),A=(0,a.up)("ion-page");return(0,a.wg)(),(0,a.j4)(A,null,{default:(0,a.w5)((()=>[(0,a.Wm)(y,null,{default:(0,a.w5)((()=>[(0,a.Wm)(p,null,{default:(0,a.w5)((()=>[(0,a.Wm)(r,null,{default:(0,a.w5)((()=>[(0,a.Wm)(o,{translation:e.$t("searchView.title")},{transportType:(0,a.w5)((()=>[(0,a._)("span",null,(0,i.zw)(e.$t(`common.${e.type}`)),1)])),_:1},8,["translation"])])),_:1}),(0,a.Wm)(u,{slot:"end"},{default:(0,a.w5)((()=>[(0,a.Wm)(c,{onClick:e.openNews,"data-testid":"open-news"},{default:(0,a.w5)((()=>[(0,a.Wm)(d,{icon:e.newspaperOutline},null,8,["icon"])])),_:1},8,["onClick"]),(0,a.Wm)(c,{onClick:e.openOption,"data-testid":"open-option"},{default:(0,a.w5)((()=>[(0,a.Wm)(d,{icon:e.cog},null,8,["icon"])])),_:1},8,["onClick"])])),_:1})])),_:1}),(0,a.Wm)(p,null,{default:(0,a.w5)((()=>[(0,a.Wm)(m,{autocorrect:"off",modelValue:e.query,"onUpdate:modelValue":t[0]||(t[0]=t=>e.query=t),placeholder:e.$t("searchView.searchPlaceHolder"),onIonFocus:e.hideKeypad,"data-testid":`search-bar-${e.type}`},null,8,["modelValue","placeholder","onIonFocus","data-testid"]),(0,a.Wm)(u,{slot:"end",class:"location-buttons"},{default:(0,a.w5)((()=>[(0,a.Wm)(c,{onClick:t[1]||(t[1]=t=>e.updateQuery(e.$t("searchView.routesNearby")))},{default:(0,a.w5)((()=>[(0,a.Wm)(d,{icon:e.locationOutline},null,8,["icon"])])),_:1})])),_:1}),"ferry"!=e.type?((0,a.wg)(),(0,a.j4)(w,{key:0,query:e.query,data:e.data,keypadOpen:e.keypadOpen,onPadClick:e.padUpdateQuery},null,8,["query","data","keypadOpen","onPadClick"])):(0,a.kq)("",!0),e.locationLoading?((0,a.wg)(),(0,a.j4)(g,{key:1,type:"indeterminate"})):(0,a.kq)("",!0)])),_:1})])),_:1}),(0,a.Wm)(W,{fullscreen:!0},{default:(0,a.w5)((()=>[e.dataReady?((0,a.wg)(),(0,a.j4)(N,{key:0},{default:(0,a.w5)((()=>[e.query.length>0?((0,a.wg)(),(0,a.j4)(k,{key:0},{default:(0,a.w5)((()=>[(0,a.Wm)(h,{class:"hint"},{default:(0,a.w5)((()=>[(0,a.Wm)(o,{translation:e.$t("searchView.searchPrompt",{query:e.query})},{transportType:(0,a.w5)((()=>[(0,a._)("span",null,(0,i.zw)(e.$t(`common.${e.type}`)),1)])),_:1},8,["translation"])])),_:1}),(0,a.Wm)(c,{fill:"clear",onClick:e.clearQuery},{default:(0,a.w5)((()=>[(0,a.Uk)((0,i.zw)(e.$t("searchView.clearSearch")),1)])),_:1},8,["onClick"])])),_:1})):((0,a.wg)(),(0,a.j4)(k,{key:1},{default:(0,a.w5)((()=>[e.starred.length>0?((0,a.wg)(),(0,a.iD)("div",n,[(0,a.Wm)(h,null,{default:(0,a.w5)((()=>[(0,a.Wm)(o,{translation:e.$t("searchView.starredPrompt")},{transportType:(0,a.w5)((()=>[(0,a._)("span",null,(0,i.zw)(e.$t(`common.${e.type}`)),1)])),_:1},8,["translation"])])),_:1}),e.disableReorder?((0,a.wg)(),(0,a.j4)(c,{key:0,fill:"clear",onClick:t[2]||(t[2]=t=>e.toggleReorder()),class:"swap-icon"},{default:(0,a.w5)((()=>[(0,a.Wm)(d,{slot:"icon-only",icon:e.swapVerticalOutline},null,8,["icon"])])),_:1})):((0,a.wg)(),(0,a.j4)(c,{key:1,fill:"solid",onClick:t[3]||(t[3]=t=>e.toggleReorder()),class:"swap-icon"},{default:(0,a.w5)((()=>[(0,a.Wm)(d,{slot:"icon-only",icon:e.swapVerticalOutline},null,8,["icon"])])),_:1}))])):(0,a.kq)("",!0)])),_:1})),e.displayArray.length>0?((0,a.wg)(),(0,a.iD)("div",s,[(0,a.Wm)(z,{disabled:e.disableReorder,onIonItemReorder:t[4]||(t[4]=t=>e.reorder(t)),"data-testid":"search-list"},{default:(0,a.w5)((()=>["comfort"===e.config.searchItemStyle?((0,a.wg)(),(0,a.j4)(f,{key:0,displayArray:e.displayArray,type:e.type,onOpenModal:e.openModal,onOpenAltModal:e.openAltModal},null,8,["displayArray","type","onOpenModal","onOpenAltModal"])):"compact_left"===e.config.searchItemStyle?((0,a.wg)(),(0,a.j4)(b,{key:1,displayArray:e.displayArray,type:e.type,onOpenModal:e.openModal,onOpenAltModal:e.openAltModal},null,8,["displayArray","type","onOpenModal","onOpenAltModal"])):"compact_right"===e.config.searchItemStyle?((0,a.wg)(),(0,a.j4)(_,{key:2,displayArray:e.displayArray,type:e.type,onOpenModal:e.openModal,onOpenAltModal:e.openAltModal},null,8,["displayArray","type","onOpenModal","onOpenAltModal"])):"detail"===e.config.searchItemStyle?((0,a.wg)(),(0,a.j4)(C,{key:3,displayArray:e.displayArray,type:e.type,onOpenModal:e.openModal,onOpenAltModal:e.openAltModal},null,8,["displayArray","type","onOpenModal","onOpenAltModal"])):(0,a.kq)("",!0)])),_:1},8,["disabled"])])):((0,a.wg)(),(0,a.iD)("div",l,[(0,a.Wm)(I,{color:"medium"},{default:(0,a.w5)((()=>[(0,a._)("p",null,(0,i.zw)(e.$t("searchView.noItem")),1)])),_:1}),(0,a.Wm)(I,{color:"medium"},{default:(0,a.w5)((()=>[(0,a._)("p",null,(0,i.zw)(e.$t("searchView.noItemHint")),1)])),_:1}),"ferry"==e.type?((0,a.wg)(),(0,a.j4)(c,{key:0,fill:"clear",onClick:e.listAll},{default:(0,a.w5)((()=>[(0,a.Uk)((0,i.zw)(e.$t("searchView.showFerry")),1)])),_:1},8,["onClick"])):(0,a.kq)("",!0)]))])),_:1})):(0,a.kq)("",!0)])),_:1}),(0,a.Wm)(M,{"is-open":e.modalIsOpen,onWillDismiss:e.closeModal},{default:(0,a.w5)((()=>[(0,a.Wm)($,{item:e.itemSelected,starred:e.starred,noEta:e.checkNoEta,altRoutes:e.altRoutes,onCloseModal:e.closeModal,onAddStar:e.addStar,onRemoveStar:e.removeStar,onSwapDirection:e.swapDirection},null,8,["item","starred","noEta","altRoutes","onCloseModal","onAddStar","onRemoveStar","onSwapDirection"])])),_:1},8,["is-open","onWillDismiss"]),(0,a.Wm)(M,{"is-open":e.optionIsOpen,onWillDismiss:e.closeOption},{default:(0,a.w5)((()=>[(0,a.Wm)(S,{onCloseOption:e.closeOption},null,8,["onCloseOption"])])),_:1},8,["is-open","onWillDismiss"]),(0,a.Wm)(M,{"is-open":e.newsIsOpen,onWillDismiss:e.closeNews},{default:(0,a.w5)((()=>[(0,a.Wm)(O,{onCloseNews:e.closeNews},null,8,["onCloseNews"])])),_:1},8,["is-open","onWillDismiss"])])),_:1})}o(7658);var d=o(2262),c=o(5316),u=o(8903),p=o(3978),m=o(9087),w=o(9155),g=o(5249);const y={key:0},h={key:1},k={key:0},f={key:1},b={key:0},_={key:1},C={key:0},z={key:1},I={key:0},N={key:1},W={key:2},$={key:0},M={key:1},S={key:0},O={key:1};function A(e,t,o,n,s,l){const r=(0,a.up)("ion-badge");return(0,a.wg)(),(0,a.iD)(a.HY,null,["bus"===e.route.type?((0,a.wg)(),(0,a.iD)("div",{key:0,class:(0,i.C_)({"badge-left":"default"!==e.position})},[e.route.company.includes("KMB")?((0,a.wg)(),(0,a.j4)(r,{key:0,class:(0,i.C_)(["kmb-badge ion-margin-start",{compact:e.compact}])},{default:(0,a.w5)((()=>[(0,a.Uk)((0,i.zw)(e.$t("badges.kmb")),1)])),_:1},8,["class"])):(0,a.kq)("",!0),e.route.company.includes("CTB")?((0,a.wg)(),(0,a.j4)(r,{key:1,class:(0,i.C_)(["ctb-badge ion-margin-start",{compact:e.compact}])},{default:(0,a.w5)((()=>[(0,a.Uk)((0,i.zw)(e.$t("badges.ctb")),1)])),_:1},8,["class"])):(0,a.kq)("",!0),e.route.company.includes("LWB")?((0,a.wg)(),(0,a.j4)(r,{key:2,class:(0,i.C_)(["lwb-badge ion-margin-start",{compact:e.compact}])},{default:(0,a.w5)((()=>[(0,a.Uk)((0,i.zw)(e.$t("badges.lwb")),1)])),_:1},8,["class"])):(0,a.kq)("",!0),e.route.company.includes("NWFB")?((0,a.wg)(),(0,a.j4)(r,{key:3,class:(0,i.C_)(["nwfb-badge ion-margin-start",{compact:e.compact}])},{default:(0,a.w5)((()=>[(0,a.Uk)((0,i.zw)(e.$t("badges.nwfb")),1)])),_:1},8,["class"])):(0,a.kq)("",!0),e.route.company.includes("DB")?((0,a.wg)(),(0,a.j4)(r,{key:4,class:(0,i.C_)(["db-badge ion-margin-start",{compact:e.compact}])},{default:(0,a.w5)((()=>[(0,a.Uk)((0,i.zw)(e.$t("badges.db")),1)])),_:1},8,["class"])):(0,a.kq)("",!0),e.route.company.includes("NLB")?((0,a.wg)(),(0,a.j4)(r,{key:5,class:(0,i.C_)(["nlb-badge ion-margin-start",{compact:e.compact}])},{default:(0,a.w5)((()=>[(0,a.Uk)((0,i.zw)(e.$t("badges.nlb")),1)])),_:1},8,["class"])):(0,a.kq)("",!0),e.route.company.includes("PI")?((0,a.wg)(),(0,a.j4)(r,{key:6,class:(0,i.C_)(["pi-badge ion-margin-start",{compact:e.compact}])},{default:(0,a.w5)((()=>[(0,a.Uk)((0,i.zw)(e.$t("badges.pi")),1)])),_:1},8,["class"])):(0,a.kq)("",!0),e.route.company.includes("XB")?((0,a.wg)(),(0,a.j4)(r,{key:7,class:(0,i.C_)(["xb-badge ion-margin-start",{compact:e.compact}])},{default:(0,a.w5)((()=>[(0,a.Uk)((0,i.zw)(e.$t("badges.xb")),1)])),_:1},8,["class"])):(0,a.kq)("",!0),e.route.company.includes("LRTFeeder")?((0,a.wg)(),(0,a.j4)(r,{key:8,class:(0,i.C_)(["ltr-badge ion-margin-start",{compact:e.compact}])},{default:(0,a.w5)((()=>[(0,a.Uk)((0,i.zw)(e.$t("badges.lrt")),1)])),_:1},8,["class"])):(0,a.kq)("",!0),e.route.serviceMode.includes("N")?((0,a.wg)(),(0,a.j4)(r,{key:9,class:(0,i.C_)(["night-badge ion-margin-start",{compact:e.compact}])},{default:(0,a.w5)((()=>[(0,a.Uk)((0,i.zw)(e.$t("badges.night")),1)])),_:1},8,["class"])):(0,a.kq)("",!0),"T"==e.route.serviceMode?((0,a.wg)(),(0,a.j4)(r,{key:10,class:(0,i.C_)(["special-badge ion-margin-start",{compact:e.compact}])},{default:(0,a.w5)((()=>[e.compact?((0,a.wg)(),(0,a.iD)("span",y,(0,i.zw)(e.$t("badges.special-short")),1)):((0,a.wg)(),(0,a.iD)("span",h,(0,i.zw)(e.$t("badges.special")),1))])),_:1},8,["class"])):(0,a.kq)("",!0)],2)):(0,a.kq)("",!0),"minibus"===e.route.type?((0,a.wg)(),(0,a.iD)("div",{key:1,class:(0,i.C_)({"badge-left":"default"!==e.position})},[e.route.district.includes("HKI")?((0,a.wg)(),(0,a.j4)(r,{key:0,class:(0,i.C_)(["hki-badge ion-margin-start",{compact:e.compact}])},{default:(0,a.w5)((()=>[e.compact?((0,a.wg)(),(0,a.iD)("span",k,(0,i.zw)(e.$t("badges.hki-short")),1)):((0,a.wg)(),(0,a.iD)("span",f,(0,i.zw)(e.$t("badges.hki")),1))])),_:1},8,["class"])):(0,a.kq)("",!0),e.route.district.includes("KLN")?((0,a.wg)(),(0,a.j4)(r,{key:1,class:(0,i.C_)(["kln-badge ion-margin-start",{compact:e.compact}])},{default:(0,a.w5)((()=>[e.compact?((0,a.wg)(),(0,a.iD)("span",b,(0,i.zw)(e.$t("badges.kln-short")),1)):((0,a.wg)(),(0,a.iD)("span",_,(0,i.zw)(e.$t("badges.kln")),1))])),_:1},8,["class"])):(0,a.kq)("",!0),e.route.district.includes("NT")?((0,a.wg)(),(0,a.j4)(r,{key:2,class:(0,i.C_)(["nt-badge ion-margin-start",{compact:e.compact}])},{default:(0,a.w5)((()=>[e.compact?((0,a.wg)(),(0,a.iD)("span",C,(0,i.zw)(e.$t("badges.nt-short")),1)):((0,a.wg)(),(0,a.iD)("span",z,(0,i.zw)(e.$t("badges.nt")),1))])),_:1},8,["class"])):(0,a.kq)("",!0),e.route.serviceMode.includes("N")?((0,a.wg)(),(0,a.j4)(r,{key:3,class:(0,i.C_)(["night-badge ion-margin-start",{compact:e.compact}])},{default:(0,a.w5)((()=>[(0,a.Uk)((0,i.zw)(e.$t("badges.night")),1)])),_:1},8,["class"])):(0,a.kq)("",!0),"T"==e.route.serviceMode?((0,a.wg)(),(0,a.j4)(r,{key:4,class:(0,i.C_)(["special-badge ion-margin-start",{compact:e.compact}])},{default:(0,a.w5)((()=>[e.compact?((0,a.wg)(),(0,a.iD)("span",I,(0,i.zw)(e.$t("badges.special-short")),1)):((0,a.wg)(),(0,a.iD)("span",N,(0,i.zw)(e.$t("badges.special")),1))])),_:1},8,["class"])):(0,a.kq)("",!0)],2)):(0,a.kq)("",!0),"ferry"===e.route.type?((0,a.wg)(),(0,a.iD)("div",W,["KAITO"==e.route.district?((0,a.wg)(),(0,a.j4)(r,{key:0,class:(0,i.C_)(["hki-badge ion-margin-start",{compact:e.compact}])},{default:(0,a.w5)((()=>[(0,a.Uk)((0,i.zw)(e.$t("badges.kaito")),1)])),_:1},8,["class"])):(0,a.kq)("",!0),"OUTLYING"==e.route.district?((0,a.wg)(),(0,a.j4)(r,{key:1,class:(0,i.C_)(["kln-badge ion-margin-start",{compact:e.compact}])},{default:(0,a.w5)((()=>[e.compact?((0,a.wg)(),(0,a.iD)("span",$,(0,i.zw)(e.$t("badges.outlying-short")),1)):((0,a.wg)(),(0,a.iD)("span",M,(0,i.zw)(e.$t("badges.outlying")),1))])),_:1},8,["class"])):(0,a.kq)("",!0),"INNER"==e.route.district?((0,a.wg)(),(0,a.j4)(r,{key:2,class:(0,i.C_)(["nt-badge ion-margin-start",{compact:e.compact}])},{default:(0,a.w5)((()=>[e.compact?((0,a.wg)(),(0,a.iD)("span",S,(0,i.zw)(e.$t("badges.inner-short")),1)):((0,a.wg)(),(0,a.iD)("span",O,(0,i.zw)(e.$t("badges.inner")),1))])),_:1},8,["class"])):(0,a.kq)("",!0)])):(0,a.kq)("",!0)],64)}var D=(0,a.aZ)({name:"Badges-component",props:["route","compact","position"],components:{IonBadge:c.yp},mounted(){}}),x=o(3744);const j=(0,x.Z)(D,[["render",A],["__scopeId","data-v-31197388"]]);var v=j,U=o(7942),R=o(9483),q=o.n(R),T=o(6009);const V={ref:"keypad",class:"py-2"},L={id:"summary-tag"},B={class:"grid keypad-wrapper"},H={class:"numbers"},E={class:"letters"};function F(e,t,o,n,s,l){const r=(0,a.up)("ion-icon"),d=(0,a.up)("ion-text"),c=(0,a.up)("ion-button"),u=(0,a.up)("ion-row");return(0,a.wg)(),(0,a.iD)("div",null,[(0,a._)("details",V,[(0,a._)("summary",L,[(0,a.Wm)(d,{color:"primary"},{default:(0,a.w5)((()=>[(0,a.Wm)(r,{icon:n.keypadOutline,class:"ion-margin-end keypad-icon"},null,8,["icon"]),(0,a.Uk)(" "+(0,i.zw)(e.$t("searchView.toggleRouteKeypad")),1)])),_:1})]),(0,a._)("div",B,[(0,a._)("div",H,[(0,a._)("div",null,[(0,a.Wm)(u,{class:"ion-justify-content-around ion-align-items-center"},{default:(0,a.w5)((()=>[(0,a.Wm)(c,{fill:"clear",size:"small",disabled:!n.numpad[1],onClick:t[0]||(t[0]=e=>l.emitClick(1))},{default:(0,a.w5)((()=>[(0,a.Uk)("1")])),_:1},8,["disabled"]),(0,a.Wm)(c,{fill:"clear",size:"small",disabled:!n.numpad[2],onClick:t[1]||(t[1]=e=>l.emitClick(2))},{default:(0,a.w5)((()=>[(0,a.Uk)("2")])),_:1},8,["disabled"]),(0,a.Wm)(c,{fill:"clear",size:"small",disabled:!n.numpad[3],onClick:t[2]||(t[2]=e=>l.emitClick(3))},{default:(0,a.w5)((()=>[(0,a.Uk)("3")])),_:1},8,["disabled"])])),_:1}),(0,a.Wm)(u,{class:"ion-justify-content-around ion-align-items-center"},{default:(0,a.w5)((()=>[(0,a.Wm)(c,{fill:"clear",size:"small",disabled:!n.numpad[4],onClick:t[3]||(t[3]=e=>l.emitClick(4))},{default:(0,a.w5)((()=>[(0,a.Uk)("4")])),_:1},8,["disabled"]),(0,a.Wm)(c,{fill:"clear",size:"small",disabled:!n.numpad[5],onClick:t[4]||(t[4]=e=>l.emitClick(5))},{default:(0,a.w5)((()=>[(0,a.Uk)("5")])),_:1},8,["disabled"]),(0,a.Wm)(c,{fill:"clear",size:"small",disabled:!n.numpad[6],onClick:t[5]||(t[5]=e=>l.emitClick(6))},{default:(0,a.w5)((()=>[(0,a.Uk)("6")])),_:1},8,["disabled"])])),_:1}),(0,a.Wm)(u,{class:"ion-justify-content-around ion-align-items-center"},{default:(0,a.w5)((()=>[(0,a.Wm)(c,{fill:"clear",size:"small",disabled:!n.numpad[7],onClick:t[6]||(t[6]=e=>l.emitClick(7))},{default:(0,a.w5)((()=>[(0,a.Uk)("7")])),_:1},8,["disabled"]),(0,a.Wm)(c,{fill:"clear",size:"small",disabled:!n.numpad[8],onClick:t[7]||(t[7]=e=>l.emitClick(8))},{default:(0,a.w5)((()=>[(0,a.Uk)("8")])),_:1},8,["disabled"]),(0,a.Wm)(c,{fill:"clear",size:"small",disabled:!n.numpad[9],onClick:t[8]||(t[8]=e=>l.emitClick(9))},{default:(0,a.w5)((()=>[(0,a.Uk)("9")])),_:1},8,["disabled"])])),_:1}),(0,a.Wm)(u,{class:"ion-justify-content-around ion-align-items-center"},{default:(0,a.w5)((()=>[(0,a.Wm)(c,{class:"icon-button",fill:"clear",size:"small",disabled:0===o.query.length,onClick:t[9]||(t[9]=e=>l.emitClick("clear"))},{default:(0,a.w5)((()=>[(0,a.Wm)(r,{slot:"icon-only",icon:n.trashBinOutline},null,8,["icon"])])),_:1},8,["disabled"]),(0,a.Wm)(c,{fill:"clear",size:"small",disabled:!n.numpad[0],onClick:t[10]||(t[10]=e=>l.emitClick(0))},{default:(0,a.w5)((()=>[(0,a.Uk)("0")])),_:1},8,["disabled"]),(0,a.Wm)(c,{class:"icon-button",fill:"clear",size:"small",disabled:0===o.query.length,onClick:t[11]||(t[11]=e=>l.emitClick("back"))},{default:(0,a.w5)((()=>[(0,a.Wm)(r,{slot:"icon-only",icon:n.backspaceOutline},null,8,["icon"])])),_:1},8,["disabled"])])),_:1})])]),(0,a._)("div",E,[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(n.letterRow,((e,t)=>((0,a.wg)(),(0,a.j4)(c,{fill:"clear",size:"small",key:t,onClick:t=>l.emitClick(e.letter)},{default:(0,a.w5)((()=>[(0,a.Uk)((0,i.zw)(e.letter),1)])),_:2},1032,["onClick"])))),128))])])],512)])}const Z=(e,t,o,a,i=20)=>{let n=[];return"ferry"===t?n=e.filter((e=>1===e.direction&&(e.routeNameTC.includes(o)||e.routeNameEN.toLowerCase().includes(o.toLowerCase())))):"zh"===a&&o<10?n=e.filter((e=>e.routeNo.length<=2&&0===e.routeNo.indexOf(o.toUpperCase())||e.destTC.includes(o))):"zh"===a?n=e.filter((e=>0===e.routeNo.indexOf(o.toUpperCase())||e.destTC.toLowerCase().includes(o.toLowerCase()))):"en"===a&&o<10?n=e.filter((e=>e.routeNo.length<=2&&0===e.routeNo.indexOf(o.toUpperCase())||e.destEN.includes(o))):"en"===a&&(n=e.filter((e=>0===e.routeNo.indexOf(o.toUpperCase())||e.destEN.toLowerCase().includes(o.toLowerCase())))),n=n.sort((function(e,t){return e=Number(e.routeNo.replace(/[A-Z]/g,0)),t=Number(t.routeNo.replace(/[A-Z]/g,0)),e-t})),n.slice(0,i)},K=e=>{const t=new Set(e.map((e=>e.routeNo)).filter((e=>e.length<=5)));return Array.from(t)},Y=e=>{const t=/([A-Za-z])/g,o=new Set;for(let a of e)a.match(t)&&a.match(t).forEach((e=>o.add(e)));return Array.from(o).sort().map((e=>({letter:e,enable:!1})))},G=(e,t)=>{const o=e.filter((e=>0===e.indexOf(t)&&e.length>t.length));let a=new Set,i={0:!1,1:!1,2:!1,3:!1,4:!1,5:!1,6:!1,7:!1,8:!1,9:!1};for(let s of o){let e=s[t.length];e.match(/\d/)?i[e]=!0:a.add(e)}const n=Array.from(a).sort(((e,t)=>e.localeCompare(t))).map((e=>({letter:e,enabled:!0})));return{numberState:i,letterState:n}};var P=!1;function Q(e,t,o){return Array.isArray(e)?(e.length=Math.max(e.length,t),e.splice(t,1,o),o):(e[t]=o,o)}function J(e,t){Array.isArray(e)?e.splice(t,1):delete e[t]}const X="undefined"!==typeof window&&"undefined"!==typeof document,ee=(Object.prototype.toString,(e,t)=>Object.prototype.hasOwnProperty.call(e,t));function te(e){const t=Object.create(null);return o=>{const a=t[o];return a||(t[o]=e(o))}}const oe=/\B([A-Z])/g,ae=(te((e=>e.replace(oe,"-$1").toLowerCase())),/-(\w)/g);te((e=>e.replace(ae,((e,t)=>t?t.toUpperCase():""))));X&&window,X&&window.document,X&&window.navigator,X&&window.location;"undefined"!==typeof globalThis?globalThis:"undefined"!==typeof window?window:"undefined"!==typeof global?global:"undefined"!==typeof self&&self;function ie(){const e=(0,d.qj)({});return{get:t=>e[t],set:(t,o)=>Q(e,t,o),has:t=>ee(e,t),delete:t=>J(e,t),clear:()=>{Object.keys(e).forEach((t=>{J(e,t)}))}}}function ne(e,t){const o=()=>(null==t?void 0:t.cache)?(0,d.qj)(t.cache):P?ie():(0,d.qj)(new Map),a=o(),i=(...e)=>(null==t?void 0:t.getKey)?t.getKey(...e):JSON.stringify(e),n=(t,...o)=>(a.set(t,e(...o)),a.get(t)),s=(...e)=>n(i(...e),...e),l=(...e)=>{a.delete(i(...e))},r=()=>{a.clear()},c=(...e)=>{const t=i(...e);return a.has(t)?a.get(t):n(t,...e)};return c.load=s,c.delete=l,c.clear=r,c.generateKey=i,c.cache=a,c}Number.POSITIVE_INFINITY;var se={name:"ComponentName",components:{IonRow:c.Nd,IonButton:c.YG,IonIcon:c.gu,IonText:c.yW},props:["data","query","keypadOpen"],emits:["padClick"],setup(){const e={0:!1,1:!1,2:!1,3:!1,4:!1,5:!1,6:!1,7:!1,8:!1,9:!1},t=(0,d.iH)(e),o=(0,d.iH)([]),a=(0,d.iH)([]),i=ne(G,{getKey:(e,t)=>t});return{numpad:t,letterRow:o,routeNoList:a,memoUpdateButton:i,backspaceOutline:u.RtN,trashBinOutline:u.Ub0,keypadOutline:u.JW_}},mounted(){},methods:{hydrateList:function(){this.routeNoList=K(this.data),this.letterRow=Y(this.routeNoList)},emitClick:function(e){this.$emit("padClick",e)}},watch:{data(e){if(e.length){this.hydrateList();const e=this.memoUpdateButton(this.routeNoList,"");this.letterRow=e.letterState,this.numpad=e.numberState}},query:function(e){const t=this.memoUpdateButton(this.routeNoList,e);this.letterRow=t.letterState,this.numpad=t.numberState},keypadOpen(){this.$refs.keypad.open=!1}},beforeUnmount(){this.memoUpdateButton.clear()}};const le=(0,x.Z)(se,[["render",F],["__scopeId","data-v-5b0ca10f"]]);var re=le,de=o(9963);const ce={key:0},ue={key:1},pe={key:0,class:"ion-no-margin ion-margin-start"},me={key:1,class:"ion-no-margin ion-margin-start"},we={key:0,class:"ion-no-margin ion-margin-start"},ge={key:1,class:"ion-no-margin ion-margin-start"};function ye(e,t,o,n,s,l){const r=(0,a.up)("ion-col"),d=(0,a.up)("Badges"),c=(0,a.up)("ion-row"),u=(0,a.up)("ion-button"),p=(0,a.up)("ion-grid"),m=(0,a.up)("ion-reorder"),w=(0,a.up)("ion-item");return(0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(o.displayArray,((t,s)=>((0,a.wg)(),(0,a.j4)(w,{key:t.id,"data-testid":`search-item-${o.type}-${s}`,button:""},{default:(0,a.w5)((()=>[(0,a.Wm)(p,null,{default:(0,a.w5)((()=>["bus"==o.type||"minibus"==o.type?((0,a.wg)(),(0,a.j4)(c,{key:0,class:"open-modal",expand:"block",onClick:e=>l.openModal(s)},{default:(0,a.w5)((()=>[(0,a.Wm)(r,{"size-xs":"3","size-md":"1",class:"route-no ion-align-items-center"},{default:(0,a.w5)((()=>[t.routeNo.length<10?((0,a.wg)(),(0,a.iD)("h3",ce,(0,i.zw)(t.routeNo),1)):((0,a.wg)(),(0,a.iD)("h3",ue))])),_:2},1024),(0,a.Wm)(r,{"size-xs":"9","size-md":"11"},{default:(0,a.w5)((()=>[(0,a.Wm)(d,{route:t,compact:n.compact,position:"default"},null,8,["route","compact"]),"zh"===e.$i18next.language?((0,a.wg)(),(0,a.iD)("h5",pe,(0,i.zw)(t.destTC),1)):((0,a.wg)(),(0,a.iD)("h5",me,(0,i.zw)(t.destEN),1))])),_:2},1024)])),_:2},1032,["onClick"])):((0,a.wg)(),(0,a.j4)(c,{key:1,class:"open-modal",expand:"block",onClick:e=>l.openModal(s)},{default:(0,a.w5)((()=>[(0,a.Wm)(r,{"size-xs":"8","size-md":"10"},{default:(0,a.w5)((()=>[(0,a.Wm)(d,{route:t,compact:n.compact},null,8,["route","compact"]),"zh"===e.$i18next.language?((0,a.wg)(),(0,a.iD)("h5",we,(0,i.zw)(t.routeNameTC),1)):((0,a.wg)(),(0,a.iD)("h5",ge,(0,i.zw)(t.routeNameEN),1))])),_:2},1024),(0,a.Wm)(r,{"size-xs":"2","size-md":"1",class:"d-flex"},{default:(0,a.w5)((()=>[(0,a.Wm)(u,{onClick:(0,de.iM)((e=>l.openModal(s)),["stop"]),class:"direction1-button direction-button"},{default:(0,a.w5)((()=>[(0,a.Uk)((0,i.zw)(e.$t("searchView.inbound")),1)])),_:2},1032,["onClick"])])),_:2},1024),(0,a.Wm)(r,{"size-xs":"2","size-md":"1",class:"d-flex"},{default:(0,a.w5)((()=>[(0,a.Wm)(u,{onClick:(0,de.iM)((e=>l.openAltModal(s)),["stop"]),class:"direction2-button direction-button"},{default:(0,a.w5)((()=>[(0,a.Uk)((0,i.zw)(e.$t("searchView.outbound")),1)])),_:2},1032,["onClick"])])),_:2},1024)])),_:2},1032,["onClick"]))])),_:2},1024),(0,a.Wm)(m,{slot:"end"})])),_:2},1032,["data-testid"])))),128)}var he={name:"Regular-Search-Items",components:{IonItem:c.Ie,IonReorder:c.Nh,IonGrid:c.jY,IonRow:c.Nd,IonCol:c.wI,IonButton:c.YG,Badges:v},props:["displayArray","type"],emits:["openModal","openAltModal"],setup(){const e=(0,d.iH)(!1);return{compact:e}},mounted(){},methods:{openModal(e){this.$emit("openModal",e)},openAltModal(e){this.$emit("openAltModal",e)}},beforeUnmount(){}};const ke=(0,x.Z)(he,[["render",ye],["__scopeId","data-v-4592131a"]]);var fe=ke;const be={key:0},_e={key:1},Ce={key:0,class:"ion-margin-start"},ze={key:1,class:"ion-margin-start"},Ie={key:0,class:"ion-margin-start"},Ne={key:1,class:"ion-margin-start"};function We(e,t,o,n,s,l){const r=(0,a.up)("Badges"),d=(0,a.up)("ion-col"),c=(0,a.up)("ion-row"),u=(0,a.up)("ion-button"),p=(0,a.up)("ion-grid"),m=(0,a.up)("ion-reorder"),w=(0,a.up)("ion-item");return(0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(o.displayArray,((t,s)=>((0,a.wg)(),(0,a.j4)(w,{key:t.id,"data-testid":`search-item-${o.type}-${s}`,button:""},{default:(0,a.w5)((()=>[(0,a.Wm)(p,null,{default:(0,a.w5)((()=>["bus"==o.type||"minibus"==o.type?((0,a.wg)(),(0,a.j4)(c,{key:0,class:"open-modal",expand:"block",onClick:e=>l.openModal(s)},{default:(0,a.w5)((()=>[(0,a.Wm)(d,{"size-xs":"2","size-md":"1",class:"badge-left"},{default:(0,a.w5)((()=>[(0,a.Wm)(r,{route:t,compact:n.compact,position:"left"},null,8,["route","compact"])])),_:2},1024),(0,a.Wm)(d,{"size-xs":"2","size-md":"1",class:"route-no ion-align-items-center"},{default:(0,a.w5)((()=>[t.routeNo.length<10?((0,a.wg)(),(0,a.iD)("h3",be,(0,i.zw)(t.routeNo),1)):((0,a.wg)(),(0,a.iD)("h3",_e))])),_:2},1024),(0,a.Wm)(d,{"size-xs":"8","size-md":"10"},{default:(0,a.w5)((()=>["zh"===e.$i18next.language?((0,a.wg)(),(0,a.iD)("h5",Ce,(0,i.zw)(t.destTC),1)):((0,a.wg)(),(0,a.iD)("h5",ze,(0,i.zw)(t.destEN),1))])),_:2},1024)])),_:2},1032,["onClick"])):((0,a.wg)(),(0,a.j4)(c,{key:1,class:"open-modal",expand:"block",onClick:e=>l.openModal(s)},{default:(0,a.w5)((()=>[(0,a.Wm)(d,{"size-xs":"2","size-md":"1",class:"badge-left"},{default:(0,a.w5)((()=>[(0,a.Wm)(r,{route:t,compact:n.compact,position:"left"},null,8,["route","compact"])])),_:2},1024),(0,a.Wm)(d,{"size-xs":"6","size-md":"9"},{default:(0,a.w5)((()=>["zh"===e.$i18next.language?((0,a.wg)(),(0,a.iD)("h5",Ie,(0,i.zw)(t.routeNameTC),1)):((0,a.wg)(),(0,a.iD)("h5",Ne,(0,i.zw)(t.routeNameEN),1))])),_:2},1024),(0,a.Wm)(d,{"size-xs":"2","size-md":"1",class:"d-flex"},{default:(0,a.w5)((()=>[(0,a.Wm)(u,{onClick:(0,de.iM)((e=>l.openModal(s)),["stop"]),class:"direction1-button direction-button"},{default:(0,a.w5)((()=>[(0,a.Uk)((0,i.zw)(e.$t("searchView.inbound")),1)])),_:2},1032,["onClick"])])),_:2},1024),(0,a.Wm)(d,{"size-xs":"2","size-md":"1",class:"d-flex"},{default:(0,a.w5)((()=>[(0,a.Wm)(u,{onClick:(0,de.iM)((e=>l.openAltModal(s)),["stop"]),class:"direction2-button direction-button"},{default:(0,a.w5)((()=>[(0,a.Uk)((0,i.zw)(e.$t("searchView.outbound")),1)])),_:2},1032,["onClick"])])),_:2},1024)])),_:2},1032,["onClick"]))])),_:2},1024),(0,a.Wm)(m,{slot:"end"})])),_:2},1032,["data-testid"])))),128)}var $e={name:"Regular-Search-Items",components:{IonItem:c.Ie,IonReorder:c.Nh,IonGrid:c.jY,IonRow:c.Nd,IonCol:c.wI,IonButton:c.YG,Badges:v},props:["displayArray","type"],emits:["openModal","openAltModal"],setup(){const e=(0,d.iH)(!0);return{compact:e}},mounted(){},methods:{openModal(e){this.$emit("openModal",e)},openAltModal(e){this.$emit("openAltModal",e)}},beforeUnmount(){}};const Me=(0,x.Z)($e,[["render",We],["__scopeId","data-v-8678032a"]]);var Se=Me;const Oe={key:0},Ae={key:1},De={key:0,class:"ion-margin-start"},xe={key:1,class:"ion-margin-start"},je={key:0,class:"ion-no-margin ion-margin-start"},ve={key:1,class:"ion-no-margin ion-margin-start"};function Ue(e,t,o,n,s,l){const r=(0,a.up)("ion-col"),d=(0,a.up)("Badges"),c=(0,a.up)("ion-row"),u=(0,a.up)("ion-button"),p=(0,a.up)("ion-grid"),m=(0,a.up)("ion-reorder"),w=(0,a.up)("ion-item");return(0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(o.displayArray,((t,s)=>((0,a.wg)(),(0,a.j4)(w,{key:t.id,"data-testid":`search-item-${o.type}-${s}`,button:""},{default:(0,a.w5)((()=>[(0,a.Wm)(p,null,{default:(0,a.w5)((()=>["bus"==o.type||"minibus"==o.type?((0,a.wg)(),(0,a.j4)(c,{key:0,class:"open-modal",expand:"block",onClick:e=>l.openModal(s)},{default:(0,a.w5)((()=>[(0,a.Wm)(r,{"size-xs":"2","size-md":"1",class:"route-no ion-align-items-center"},{default:(0,a.w5)((()=>[t.routeNo.length<10?((0,a.wg)(),(0,a.iD)("h3",Oe,(0,i.zw)(t.routeNo),1)):((0,a.wg)(),(0,a.iD)("h3",Ae))])),_:2},1024),(0,a.Wm)(r,{"size-xs":"8","size-md":"10"},{default:(0,a.w5)((()=>["zh"===e.$i18next.language?((0,a.wg)(),(0,a.iD)("h5",De,(0,i.zw)(t.destTC),1)):((0,a.wg)(),(0,a.iD)("h5",xe,(0,i.zw)(t.destEN),1))])),_:2},1024),(0,a.Wm)(r,{"size-xs":"2","size-md":"1",class:"badge-col"},{default:(0,a.w5)((()=>[(0,a.Wm)(d,{route:t,compact:n.compact,position:"right"},null,8,["route","compact"])])),_:2},1024)])),_:2},1032,["onClick"])):((0,a.wg)(),(0,a.j4)(c,{key:1,class:"open-modal",expand:"block",onClick:e=>l.openModal(s)},{default:(0,a.w5)((()=>[(0,a.Wm)(r,{"size-xs":"6","size-md":"9"},{default:(0,a.w5)((()=>["zh"===e.$i18next.language?((0,a.wg)(),(0,a.iD)("h5",je,(0,i.zw)(t.routeNameTC),1)):((0,a.wg)(),(0,a.iD)("h5",ve,(0,i.zw)(t.routeNameEN),1))])),_:2},1024),(0,a.Wm)(r,{"size-xs":"2","size-md":"1",class:"badge-col"},{default:(0,a.w5)((()=>[(0,a.Wm)(d,{route:t,compact:n.compact,position:"right"},null,8,["route","compact"])])),_:2},1024),(0,a.Wm)(r,{"size-xs":"2","size-md":"1",class:"d-flex"},{default:(0,a.w5)((()=>[(0,a.Wm)(u,{onClick:(0,de.iM)((e=>l.openModal(s)),["stop"]),class:"direction1-button direction-button"},{default:(0,a.w5)((()=>[(0,a.Uk)((0,i.zw)(e.$t("searchView.inbound")),1)])),_:2},1032,["onClick"])])),_:2},1024),(0,a.Wm)(r,{"size-xs":"2","size-md":"1",class:"d-flex"},{default:(0,a.w5)((()=>[(0,a.Wm)(u,{onClick:(0,de.iM)((e=>l.openAltModal(s)),["stop"]),class:"direction2-button direction-button"},{default:(0,a.w5)((()=>[(0,a.Uk)((0,i.zw)(e.$t("searchView.outbound")),1)])),_:2},1032,["onClick"])])),_:2},1024)])),_:2},1032,["onClick"]))])),_:2},1024),(0,a.Wm)(m,{slot:"end"})])),_:2},1032,["data-testid"])))),128)}var Re={name:"Regular-Search-Items",components:{IonItem:c.Ie,IonReorder:c.Nh,IonGrid:c.jY,IonRow:c.Nd,IonCol:c.wI,IonButton:c.YG,Badges:v},props:["displayArray","type"],emits:["openModal","openAltModal"],setup(){const e=(0,d.iH)(!0);return{compact:e}},mounted(){},methods:{openModal(e){this.$emit("openModal",e)},openAltModal(e){this.$emit("openAltModal",e)}},beforeUnmount(){}};const qe=(0,x.Z)(Re,[["render",Ue],["__scopeId","data-v-8ae4545c"]]);var Te=qe;const Ve={className:"badge-wrapper"},Le={key:0,class:"route-no"},Be={key:1},He={key:0,class:"ion-margin-start"},Ee={class:"ion-text item-subtitle"},Fe={class:"small-scale"},Ze={class:"ion-no-margin"},Ke={class:"small-scale"},Ye={key:1,class:"ion-margin-start"},Ge={class:"ion-text item-subtitle"},Pe={class:"small-scale"},Qe={class:"ion-no-margin"},Je={class:"small-scale"},Xe={key:0,class:"ion-no-margin ion-margin-start"},et={key:0,class:"ion-no-margin item-subtitle"},tt={class:"ion-no-margin"},ot={key:1,class:"ion-no-margin ion-margin-start"},at={key:0,class:"ion-no-margin item-subtitle"},it={class:"ion-no-margin"};function nt(e,t,o,n,s,l){const r=(0,a.up)("Badges"),d=(0,a.up)("ion-col"),c=(0,a.up)("ion-row"),u=(0,a.up)("ion-button"),p=(0,a.up)("ion-grid"),m=(0,a.up)("ion-reorder"),w=(0,a.up)("ion-item");return(0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(o.displayArray,((t,s)=>((0,a.wg)(),(0,a.j4)(w,{key:t.id,"data-testid":`search-item-${o.type}-${s}`,button:""},{default:(0,a.w5)((()=>[(0,a.Wm)(p,null,{default:(0,a.w5)((()=>["bus"==o.type||"minibus"==o.type?((0,a.wg)(),(0,a.j4)(c,{key:0,expand:"block",onClick:e=>l.openModal(s)},{default:(0,a.w5)((()=>[(0,a.Wm)(d,{"size-xs":"3","size-md":"1",class:"route-no-wrapper ion-align-items-center"},{default:(0,a.w5)((()=>[(0,a._)("div",Ve,[(0,a.Wm)(r,{route:t,compact:n.compact,position:"default"},null,8,["route","compact"])]),t.routeNo.length<10?((0,a.wg)(),(0,a.iD)("h3",Le,(0,i.zw)(t.routeNo),1)):((0,a.wg)(),(0,a.iD)("h3",Be))])),_:2},1024),(0,a.Wm)(d,{"size-xs":"9","size-md":"11",class:"dest-wrapper"},{default:(0,a.w5)((()=>["zh"===e.$i18next.language?((0,a.wg)(),(0,a.iD)("div",He,[(0,a._)("span",Ee,[(0,a._)("span",Fe,(0,i.zw)(e.$t("searchView.from")),1),(0,a.Uk)(" "+(0,i.zw)(t.originTC),1)]),(0,a._)("h4",Ze,[(0,a._)("span",Ke,(0,i.zw)(e.$t("searchView.to")),1),(0,a.Uk)(" "+(0,i.zw)(t.destTC),1)])])):"en"===e.$i18next.language?((0,a.wg)(),(0,a.iD)("div",Ye,[(0,a._)("span",Ge,[(0,a._)("span",Pe,(0,i.zw)(e.$t("searchView.from")),1),(0,a.Uk)(" "+(0,i.zw)(t.originEN),1)]),(0,a._)("h5",Qe,[(0,a._)("span",Je,(0,i.zw)(e.$t("searchView.to")),1),(0,a.Uk)(" "+(0,i.zw)(t.destEN),1)])])):(0,a.kq)("",!0)])),_:2},1024)])),_:2},1032,["onClick"])):((0,a.wg)(),(0,a.j4)(c,{key:1,expand:"block",onClick:e=>l.openModal(s)},{default:(0,a.w5)((()=>[(0,a.Wm)(d,{"size-xs":"8","size-md":"10"},{default:(0,a.w5)((()=>[(0,a.Wm)(r,{route:t,compact:n.compact},null,8,["route","compact"]),"zh"===e.$i18next.language?((0,a.wg)(),(0,a.iD)("div",Xe,[""!==l.getFerryVia(t.routeNameTC)?((0,a.wg)(),(0,a.iD)("p",et,(0,i.zw)(`${e.$t("searchView.via")} ${l.getFerryVia(t.routeNameTC)}`),1)):(0,a.kq)("",!0),(0,a._)("h5",tt,(0,i.zw)(`${l.getFerryFrom(t.routeNameTC)} → ${l.getFerryTo(t.routeNameTC)}`),1)])):((0,a.wg)(),(0,a.iD)("div",ot,[""!==l.getFerryVia(t.routeNameEN)?((0,a.wg)(),(0,a.iD)("p",at,(0,i.zw)(`${e.$t("searchView.via")} ${l.getFerryVia(t.routeNameEN)}`),1)):(0,a.kq)("",!0),(0,a._)("h5",it,(0,i.zw)(`${l.getFerryFrom(t.routeNameEN)} → ${l.getFerryTo(t.routeNameEN)}`),1)]))])),_:2},1024),(0,a.Wm)(d,{"size-xs":"2","size-md":"1",class:"flex items-center"},{default:(0,a.w5)((()=>[(0,a.Wm)(u,{onClick:(0,de.iM)((e=>l.openModal(s)),["stop"]),class:"direction1-button direction-button"},{default:(0,a.w5)((()=>[(0,a.Uk)((0,i.zw)(e.$t("searchView.inbound")),1)])),_:2},1032,["onClick"])])),_:2},1024),(0,a.Wm)(d,{"size-xs":"2","size-md":"1",class:"flex items-center"},{default:(0,a.w5)((()=>[(0,a.Wm)(u,{onClick:(0,de.iM)((e=>l.openAltModal(s)),["stop"]),class:"direction2-button direction-button"},{default:(0,a.w5)((()=>[(0,a.Uk)((0,i.zw)(e.$t("searchView.outbound")),1)])),_:2},1032,["onClick"])])),_:2},1024)])),_:2},1032,["onClick"]))])),_:2},1024),(0,a.Wm)(m,{slot:"end"})])),_:2},1032,["data-testid"])))),128)}var st={name:"Regular-Search-Items",components:{IonItem:c.Ie,IonReorder:c.Nh,IonGrid:c.jY,IonRow:c.Nd,IonCol:c.wI,IonButton:c.YG,Badges:v},props:["displayArray","type"],emits:["openModal","openAltModal"],setup(){const e=(0,d.iH)(!1);return{compact:e}},mounted(){},methods:{openModal(e){this.$emit("openModal",e)},openAltModal(e){this.$emit("openAltModal",e)},getFerryFrom(e){return e.split(" - ").slice(0,1).join("")},getFerryTo(e){const t=e.split(" - ");return t.slice(t.length-1,t.length).join("")},getFerryVia(e){const t=e.split(" - ");return t.slice(1,t.length-1).join(", ")}},beforeUnmount(){}};const lt=(0,x.Z)(st,[["render",nt],["__scopeId","data-v-36fa8360"]]);var rt=lt,dt=o(7698);async function ct(e,t){return new Promise((o=>ut(e,t,o)))}function ut(e,t,o){try{navigator.geolocation.getCurrentPosition((a=>{let i=e.map((e=>{const t=e.stops.reduce(((e,t)=>{if(void 0!=t.coord){const o=(0,dt.getDistance)({latitude:a.coords.latitude,longitude:a.coords.longitude},{latitude:t.coord[1],longitude:t.coord[0]});return Math.min(o,e)}return e}),1/0);return{...e,minDistance:t}}));o(i.filter((e=>e.minDistance<1e3)).sort(((e,t)=>e.minDistance-t.minDistance)).slice(0,t))}),(()=>{o(new Error("get Location failed"))}))}catch(a){o(a)}}var pt=(0,a.aZ)({components:{IonHeader:c.Gu,IonToolbar:c.sr,IonContent:c.W2,IonText:c.yW,IonPage:c._i,IonSearchbar:c.VI,IonItem:c.Ie,IonLabel:c.Q$,IonList:c.q_,IonListHeader:c.yh,IonModal:c.ki,IonGrid:c.jY,IonRow:c.Nd,IonCol:c.wI,Badges:v,IonButton:c.YG,IonIcon:c.gu,IonTitle:c.wd,IonButtons:c.Sm,ETAPopup:m.Z,OptionView:w.Z,News:g.Z,Keypad:re,IonReorder:c.Nh,IonReorderGroup:c.oz,IonProgressBar:c.X7,RegularSearchItems:fe,CompactSearchItemsLeft:Se,CompactSearchItemsRight:Te,DetailSearchItems:rt},name:"SearchView",props:["dataType"],setup(e){const t=(0,d.iH)(""),o=(0,d.iH)([]),i=(0,d.iH)({}),n=(0,d.iH)([]),s=(0,d.iH)(!1),l=(0,d.iH)(!1),r=(0,d.iH)(!1),c=(0,d.iH)([]),p=(0,d.iH)([]),m=(0,d.iH)(e.dataType),w=(0,d.iH)(!1),g=(0,d.iH)(!0),y=(0,d.iH)(!1),h=(0,d.iH)(!1),k=ne(Z,{getKey:(e,t,o,a,i)=>`${o.toUpperCase()}-${a}-${i}`});addEventListener("ionModalDidDismiss",(function(){s.value=!1}));const f=(0,a.f3)("globalConfig");return{data:c,memoFilterQuery:k,query:t,displayArray:o,itemSelected:i,keypadOpen:y,altRoutes:n,config:f,modalIsOpen:s,optionIsOpen:l,newsIsOpen:r,disableReorder:g,starred:p,type:m,dataReady:w,locationLoading:h,cog:u.Mjo,chevronBack:u.Mny,swapVerticalOutline:u.CLz,newspaperOutline:u.U7$,locationOutline:u.Iv7}},methods:{openModal(e){this.itemSelected=JSON.parse(JSON.stringify(this.displayArray[e])),this.getAltRoutes(),this.modalIsOpen=!0},openAltModal(e){let t=this.displayArray[e],o=this.data.findIndex((e=>e.routeId===t.routeId&&e.direction!=t.direction));-1!=o?(this.itemSelected=JSON.parse(JSON.stringify(this.data[o])),this.getAltRoutes(),this.modalIsOpen=!0):((0,T.Z)("info","未找到相關方向，正在顯示順行"),this.openModal(e))},closeModal(){this.modalIsOpen=!1},openOption(){this.optionIsOpen=!0},openNews(){this.newsIsOpen=!0},closeOption(){this.optionIsOpen=!1},closeNews(){this.newsIsOpen=!1},async addStar(){this.starred.push(this.itemSelected),await this.saveStar()},async removeStar(){const e=this.starred.findIndex((e=>e.routeId===this.itemSelected.routeId&&e.direction===this.itemSelected.direction));this.starred.splice(e,1),await this.saveStar()},async saveStar(){const e=await q().getItem("starred"),t={...e,[this.type]:JSON.parse(JSON.stringify(this.starred))};await q().setItem("starred",t)},hideKeypad(){this.keypadOpen=!this.keypadOpen},currentSelectedItem(e){return e.routeId==this.itemSelected.routeId&&e.routeDirection==this.itemSelected.routeDirection},filterQuery(e){let t=[];return""===e?this.starred:"ferry"!=this.type?(t="zh"===this.$i18next.language?e<10?this.data.filter((t=>t.routeNo.length<=2&&0==t.routeNo.indexOf(e.toUpperCase())||t.destTC.includes(e))):this.data.filter((t=>0==t.routeNo.indexOf(e.toUpperCase())||t.destTC.includes(e))):e<10?this.data.filter((t=>t.routeNo.length<=2&&0==t.routeNo.indexOf(e.toUpperCase())||t.destEN.toLowerCase().includes(e.toLowerCase()))):this.data.filter((t=>0==t.routeNo.indexOf(e.toUpperCase())||t.destEN.toLowerCase().includes(e.toLowerCase()))),t=t.sort((function(e,t){return e=Number(e.routeNo.replace(/[A-Z]/g,0)),t=Number(t.routeNo.replace(/[A-Z]/g,0)),e-t})),t.slice(0,50)):void(t=this.data.filter((t=>1==t.direction&&(t.routeNameTC.includes(e)||t.routeNameEN.toLowerCase().includes(e.toLowerCase())))))},padUpdateQuery(e){"clear"===e?this.clearQuery():this.query="back"===e?this.query.substring(0,this.query.length-1):`${this.query}${e}`},listAll(){this.query=" "},clearQuery(){this.query=""},async swapDirection(e=void 0){e?(this.modalIsOpen=!1,await(0,U.Z)(100),this.itemSelected=JSON.parse(JSON.stringify(e)),this.getAltRoutes(),this.modalIsOpen=!0,console.log(this.itemSelected)):(0,T.Z)("error","此路線未有對頭車")},getAltRoutes(){"bus"==this.itemSelected.type&&this.itemSelected.company.includes("KMB")?this.altRoutes=this.data.filter((e=>e.routeNo==this.itemSelected.routeNo&&e.company.join("")==this.itemSelected.company.join("")&&(e.direction!=this.itemSelected.direction||e.serviceMode!=this.itemSelected.serviceMode||e.specialType!=this.itemSelected.specialType))):"bus"==this.itemSelected.type&&this.itemSelected.company.includes("NLB")?this.altRoutes=this.data.filter((e=>e.company.includes("NLB")&&e.routeNo==this.itemSelected.routeNo&&e.routeId!=this.itemSelected.routeId)):"bus"==this.itemSelected.type?this.altRoutes=this.data.filter((e=>e.company.join("")==this.itemSelected.company.join("")&&e.routeNo==this.itemSelected.routeNo&&(e.routeId!=this.itemSelected.routeId||e.direction!=this.itemSelected.direction))):"minibus"==this.itemSelected.type?this.altRoutes=this.data.filter((e=>e.routeNo==this.itemSelected.routeNo&&e.district==this.itemSelected.district&&(e.routeId!=this.itemSelected.routeId||e.direction!=this.itemSelected.direction))):this.altRoutes=this.data.filter((e=>e.routeId==this.itemSelected.routeId&&e.direction!=this.itemSelected.direction))},toggleReorder(){this.disableReorder=!this.disableReorder},async reorder(e){e.detail.complete(this.starred),await this.saveStar()},updateQuery(e){this.hideKeypad(),this.query=e}},async mounted(){this.data=await(0,p.FS)(this.type);let e=await q().getItem("starred");e&&e[this.type]?this.starred=e[this.type]:this.starred=[],this.displayArray=this.starred,this.dataReady=!0},watch:{query(e){""===e?this.displayArray=this.starred:"Routes Nearby"===e||"附近的路線"===e?(this.locationLoading=!0,ct(this.data,this.config.maxResults).then((e=>{this.locationLoading=!1,e instanceof Error?(0,T.Z)("error",this.$t("toast.locationFail")):"ferry"===this.type?this.displayArray=e.filter((e=>1===e.direction)):this.displayArray=e}))):this.displayArray=this.memoFilterQuery(this.data,this.type,e,this.$i18next.language,this.config.maxResults),this.disableReorder=!0}},computed:{checkNoEta(){return"ferry"==this.type||"tram"==this.type}},unmounted(){this.memoFilterQuery.clear()}});const mt=(0,x.Z)(pt,[["render",r],["__scopeId","data-v-d08a3e50"]]);var wt=mt}}]);
//# sourceMappingURL=822.f39745ac.js.map