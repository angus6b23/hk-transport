"use strict";(self["webpackChunkhk_transport"]=self["webpackChunkhk_transport"]||[]).push([[889],{8956:function(e,t,i){i.d(t,{Z:function(){return se}});var o=i(6252),a=i(3577),n=i(9963);const s={key:0,class:"star-wrapper"},l={key:2},r={key:0},d={key:1},c={key:0,class:"ion-no-margin ion-margin-start"},u={key:1,class:"ion-no-margin ion-margin-start"},p={key:0,class:"ion-no-margin ion-margin-start"},m={key:1,class:"ion-no-margin ion-margin-start"},w={key:3,class:"no-content"};function h(e,t){const i=(0,o.up)("i18next"),h=(0,o.up)("ion-title"),g=(0,o.up)("ion-icon"),y=(0,o.up)("ion-button"),f=(0,o.up)("ion-buttons"),k=(0,o.up)("ion-toolbar"),b=(0,o.up)("ion-searchbar"),C=(0,o.up)("Keypad"),_=(0,o.up)("ion-header"),N=(0,o.up)("ion-label"),I=(0,o.up)("ion-list-header"),S=(0,o.up)("ion-col"),W=(0,o.up)("Badges"),O=(0,o.up)("ion-row"),z=(0,o.up)("ion-grid"),U=(0,o.up)("ion-reorder"),$=(0,o.up)("ion-item"),q=(0,o.up)("ion-reorder-group"),j=(0,o.up)("ion-text"),v=(0,o.up)("ion-list"),R=(0,o.up)("ion-content"),L=(0,o.up)("ETAPopup"),x=(0,o.up)("ion-modal"),A=(0,o.up)("OptionView"),T=(0,o.up)("News"),D=(0,o.up)("ion-page");return(0,o.wg)(),(0,o.j4)(D,null,{default:(0,o.w5)((()=>[(0,o.Wm)(_,null,{default:(0,o.w5)((()=>[(0,o.Wm)(k,null,{default:(0,o.w5)((()=>[(0,o.Wm)(h,null,{default:(0,o.w5)((()=>[(0,o.Wm)(i,{translation:e.$t("searchView.title")},{transportType:(0,o.w5)((()=>[(0,o._)("span",null,(0,a.zw)(e.$t(`common.${e.type}`)),1)])),_:1},8,["translation"])])),_:1}),(0,o.Wm)(f,{slot:"end"},{default:(0,o.w5)((()=>[(0,o.Wm)(y,{onClick:e.openNews,"data-testid":"open-news"},{default:(0,o.w5)((()=>[(0,o.Wm)(g,{icon:e.newspaperOutline},null,8,["icon"])])),_:1},8,["onClick"]),(0,o.Wm)(y,{onClick:e.openOption,"data-testid":"open-option"},{default:(0,o.w5)((()=>[(0,o.Wm)(g,{icon:e.cog},null,8,["icon"])])),_:1},8,["onClick"])])),_:1})])),_:1}),(0,o.Wm)(k,null,{default:(0,o.w5)((()=>[(0,o.Wm)(b,{autocorrect:"off",modelValue:e.query,"onUpdate:modelValue":t[0]||(t[0]=t=>e.query=t),placeholder:e.$t("searchView.searchPlaceHolder"),onIonFocus:e.hideKeypad,"data-testid":`search-bar-${e.type}`},null,8,["modelValue","placeholder","onIonFocus","data-testid"]),"ferry"!=e.type?((0,o.wg)(),(0,o.j4)(C,{key:0,query:e.query,data:e.data,keypadOpen:e.keypadOpen,onPadClick:e.padUpdateQuery},null,8,["query","data","keypadOpen","onPadClick"])):(0,o.kq)("",!0)])),_:1})])),_:1}),(0,o.Wm)(R,{fullscreen:!0},{default:(0,o.w5)((()=>[e.dataReady?((0,o.wg)(),(0,o.j4)(v,{key:0},{default:(0,o.w5)((()=>[e.query.length>0?((0,o.wg)(),(0,o.j4)(I,{key:0},{default:(0,o.w5)((()=>[(0,o.Wm)(N,{class:"hint"},{default:(0,o.w5)((()=>[(0,o.Wm)(i,{translation:e.$t("searchView.searchPrompt",{query:e.query})},{transportType:(0,o.w5)((()=>[(0,o._)("span",null,(0,a.zw)(e.$t(`common.${e.type}`)),1)])),_:1},8,["translation"])])),_:1}),(0,o.Wm)(y,{fill:"clear",onClick:e.clearQuery},{default:(0,o.w5)((()=>[(0,o.Uk)((0,a.zw)(e.$t("searchView.clearSearch")),1)])),_:1},8,["onClick"])])),_:1})):((0,o.wg)(),(0,o.j4)(I,{key:1},{default:(0,o.w5)((()=>[e.starred.length>0?((0,o.wg)(),(0,o.iD)("div",s,[(0,o.Wm)(N,null,{default:(0,o.w5)((()=>[(0,o.Wm)(i,{translation:e.$t("searchView.starredPrompt")},{transportType:(0,o.w5)((()=>[(0,o._)("span",null,(0,a.zw)(e.$t(`common.${e.type}`)),1)])),_:1},8,["translation"])])),_:1}),e.disableReorder?((0,o.wg)(),(0,o.j4)(y,{key:0,fill:"clear",onClick:t[1]||(t[1]=t=>e.toggleReorder()),class:"swap-icon"},{default:(0,o.w5)((()=>[(0,o.Wm)(g,{slot:"icon-only",icon:e.swapVerticalOutline},null,8,["icon"])])),_:1})):((0,o.wg)(),(0,o.j4)(y,{key:1,fill:"solid",onClick:t[2]||(t[2]=t=>e.toggleReorder()),class:"swap-icon"},{default:(0,o.w5)((()=>[(0,o.Wm)(g,{slot:"icon-only",icon:e.swapVerticalOutline},null,8,["icon"])])),_:1}))])):(0,o.kq)("",!0)])),_:1})),e.displayArray.length>0?((0,o.wg)(),(0,o.iD)("div",l,[(0,o.Wm)(q,{disabled:e.disableReorder,onIonItemReorder:t[3]||(t[3]=t=>e.reorder(t)),"data-testid":"search-list"},{default:(0,o.w5)((()=>[((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)(e.displayArray,((t,i)=>((0,o.wg)(),(0,o.j4)($,{key:t.id,"data-testid":`search-item-${e.type}`,button:""},{default:(0,o.w5)((()=>[(0,o.Wm)(z,null,{default:(0,o.w5)((()=>["bus"==e.type||"minibus"==e.type?((0,o.wg)(),(0,o.j4)(O,{key:0,class:"open-modal",expand:"block",onClick:t=>e.openModal(i)},{default:(0,o.w5)((()=>[(0,o.Wm)(S,{"size-xs":"3","size-md":"1",class:"route-no ion-align-items-center"},{default:(0,o.w5)((()=>[t.routeNo.length<10?((0,o.wg)(),(0,o.iD)("h3",r,(0,a.zw)(t.routeNo),1)):((0,o.wg)(),(0,o.iD)("h3",d))])),_:2},1024),(0,o.Wm)(S,{"size-xs":"9","size-md":"11"},{default:(0,o.w5)((()=>[(0,o.Wm)(W,{route:t},null,8,["route"]),"zh"===e.$i18next.language?((0,o.wg)(),(0,o.iD)("h5",c,(0,a.zw)(t.destTC),1)):((0,o.wg)(),(0,o.iD)("h5",u,(0,a.zw)(t.destEN),1))])),_:2},1024)])),_:2},1032,["onClick"])):((0,o.wg)(),(0,o.j4)(O,{key:1,class:"open-modal",expand:"block",onClick:t=>e.openModal(i)},{default:(0,o.w5)((()=>[(0,o.Wm)(S,{"size-xs":"8","size-md":"10"},{default:(0,o.w5)((()=>[(0,o.Wm)(W,{route:t},null,8,["route"]),"zh"===e.$i18next.language?((0,o.wg)(),(0,o.iD)("h5",p,(0,a.zw)(t.routeNameTC),1)):((0,o.wg)(),(0,o.iD)("h5",m,(0,a.zw)(t.routeNameEN),1))])),_:2},1024),(0,o.Wm)(S,{"size-xs":"2","size-md":"1",class:"d-flex"},{default:(0,o.w5)((()=>[(0,o.Wm)(y,{onClick:(0,n.iM)((t=>e.openModal(i)),["stop"]),class:"direction1-button direction-button"},{default:(0,o.w5)((()=>[(0,o.Uk)((0,a.zw)(e.$t("searchView.inbound")),1)])),_:2},1032,["onClick"])])),_:2},1024),(0,o.Wm)(S,{"size-xs":"2","size-md":"1",class:"d-flex"},{default:(0,o.w5)((()=>[(0,o.Wm)(y,{onClick:(0,n.iM)((t=>e.openAltModal(i)),["stop"]),class:"direction2-button direction-button"},{default:(0,o.w5)((()=>[(0,o.Uk)((0,a.zw)(e.$t("searchView.outbound")),1)])),_:2},1032,["onClick"])])),_:2},1024)])),_:2},1032,["onClick"]))])),_:2},1024),(0,o.Wm)(U,{slot:"end"})])),_:2},1032,["data-testid"])))),128))])),_:1},8,["disabled"])])):((0,o.wg)(),(0,o.iD)("div",w,[(0,o.Wm)(j,{color:"medium"},{default:(0,o.w5)((()=>[(0,o._)("p",null,(0,a.zw)(e.$t("searchView.noItem")),1)])),_:1}),(0,o.Wm)(j,{color:"medium"},{default:(0,o.w5)((()=>[(0,o._)("p",null,(0,a.zw)(e.$t("searchView.noItemHint")),1)])),_:1}),"ferry"==e.type?((0,o.wg)(),(0,o.j4)(y,{key:0,fill:"clear",onClick:e.listAll},{default:(0,o.w5)((()=>[(0,o.Uk)((0,a.zw)(e.$t("searchView.showFerry")),1)])),_:1},8,["onClick"])):(0,o.kq)("",!0)]))])),_:1})):(0,o.kq)("",!0)])),_:1}),(0,o.Wm)(x,{"is-open":e.modalIsOpen,onWillDismiss:e.closeModal},{default:(0,o.w5)((()=>[(0,o.Wm)(L,{item:e.itemSelected,starred:e.starred,noEta:e.checkNoEta,altRoutes:e.altRoutes,onCloseModal:e.closeModal,onAddStar:e.addStar,onRemoveStar:e.removeStar,onSwapDirection:e.swapDirection},null,8,["item","starred","noEta","altRoutes","onCloseModal","onAddStar","onRemoveStar","onSwapDirection"])])),_:1},8,["is-open","onWillDismiss"]),(0,o.Wm)(x,{"is-open":e.optionIsOpen,onWillDismiss:e.closeOption},{default:(0,o.w5)((()=>[(0,o.Wm)(A,{onCloseOption:e.closeOption,onChangeLanguage:e.changeLanguage},null,8,["onCloseOption","onChangeLanguage"])])),_:1},8,["is-open","onWillDismiss"]),(0,o.Wm)(x,{"is-open":e.newsIsOpen,onWillDismiss:e.closeNews},{default:(0,o.w5)((()=>[(0,o.Wm)(T,{onCloseNews:e.closeNews},null,8,["onCloseNews"])])),_:1},8,["is-open","onWillDismiss"])])),_:1})}i(7658);var g=i(2262),y=i(3269),f=i(8903),k=i(3978),b=i(8649),C=i(6521),_=i(9769);const N={key:0},I={key:1},S={key:2};function W(e,t,i,n,s,l){const r=(0,o.up)("ion-badge");return(0,o.wg)(),(0,o.iD)(o.HY,null,["bus"===e.route.type?((0,o.wg)(),(0,o.iD)("div",N,[e.route.company.includes("KMB")?((0,o.wg)(),(0,o.j4)(r,{key:0,class:"kmb-badge ion-margin-start"},{default:(0,o.w5)((()=>[(0,o.Uk)((0,a.zw)(e.$t("badges.kmb")),1)])),_:1})):(0,o.kq)("",!0),e.route.company.includes("CTB")?((0,o.wg)(),(0,o.j4)(r,{key:1,class:"ctb-badge ion-margin-start"},{default:(0,o.w5)((()=>[(0,o.Uk)((0,a.zw)(e.$t("badges.ctb")),1)])),_:1})):(0,o.kq)("",!0),e.route.company.includes("LWB")?((0,o.wg)(),(0,o.j4)(r,{key:2,class:"lwb-badge ion-margin-start"},{default:(0,o.w5)((()=>[(0,o.Uk)((0,a.zw)(e.$t("badges.lwb")),1)])),_:1})):(0,o.kq)("",!0),e.route.company.includes("NWFB")?((0,o.wg)(),(0,o.j4)(r,{key:3,class:"nwfb-badge ion-margin-start"},{default:(0,o.w5)((()=>[(0,o.Uk)((0,a.zw)(e.$t("badges.nwfb")),1)])),_:1})):(0,o.kq)("",!0),e.route.company.includes("DB")?((0,o.wg)(),(0,o.j4)(r,{key:4,class:"db-badge ion-margin-start"},{default:(0,o.w5)((()=>[(0,o.Uk)((0,a.zw)(e.$t("badges.db")),1)])),_:1})):(0,o.kq)("",!0),e.route.company.includes("NLB")?((0,o.wg)(),(0,o.j4)(r,{key:5,class:"nlb-badge ion-margin-start"},{default:(0,o.w5)((()=>[(0,o.Uk)((0,a.zw)(e.$t("badges.nlb")),1)])),_:1})):(0,o.kq)("",!0),e.route.company.includes("PI")?((0,o.wg)(),(0,o.j4)(r,{key:6,class:"pi-badge ion-margin-start"},{default:(0,o.w5)((()=>[(0,o.Uk)((0,a.zw)(e.$t("badges.pi")),1)])),_:1})):(0,o.kq)("",!0),e.route.company.includes("XB")?((0,o.wg)(),(0,o.j4)(r,{key:7,class:"xb-badge ion-margin-start"},{default:(0,o.w5)((()=>[(0,o.Uk)((0,a.zw)(e.$t("badges.xb")),1)])),_:1})):(0,o.kq)("",!0),e.route.company.includes("LRTFeeder")?((0,o.wg)(),(0,o.j4)(r,{key:8,class:"ltr-badge ion-margin-start"},{default:(0,o.w5)((()=>[(0,o.Uk)((0,a.zw)(e.$t("badges.lrt")),1)])),_:1})):(0,o.kq)("",!0),e.route.serviceMode.includes("N")?((0,o.wg)(),(0,o.j4)(r,{key:9,class:"night-badge ion-margin-start"},{default:(0,o.w5)((()=>[(0,o.Uk)((0,a.zw)(e.$t("badges.night")),1)])),_:1})):(0,o.kq)("",!0),"T"==e.route.serviceMode?((0,o.wg)(),(0,o.j4)(r,{key:10,class:"special-badge ion-margin-start"},{default:(0,o.w5)((()=>[(0,o.Uk)((0,a.zw)(e.$t("badges.special")),1)])),_:1})):(0,o.kq)("",!0)])):(0,o.kq)("",!0),"minibus"===e.route.type?((0,o.wg)(),(0,o.iD)("div",I,[e.route.district.includes("HKI")?((0,o.wg)(),(0,o.j4)(r,{key:0,class:"hki-badge ion-margin-start"},{default:(0,o.w5)((()=>[(0,o.Uk)((0,a.zw)(e.$t("badges.hki")),1)])),_:1})):(0,o.kq)("",!0),e.route.district.includes("KLN")?((0,o.wg)(),(0,o.j4)(r,{key:1,class:"kln-badge ion-margin-start"},{default:(0,o.w5)((()=>[(0,o.Uk)((0,a.zw)(e.$t("badges.kln")),1)])),_:1})):(0,o.kq)("",!0),e.route.district.includes("NT")?((0,o.wg)(),(0,o.j4)(r,{key:2,class:"nt-badge ion-margin-start"},{default:(0,o.w5)((()=>[(0,o.Uk)((0,a.zw)(e.$t("badges.nt")),1)])),_:1})):(0,o.kq)("",!0),e.route.serviceMode.includes("N")?((0,o.wg)(),(0,o.j4)(r,{key:3,class:"night-badge ion-margin-start"},{default:(0,o.w5)((()=>[(0,o.Uk)((0,a.zw)(e.$t("badges.night")),1)])),_:1})):(0,o.kq)("",!0),"T"==e.route.serviceMode?((0,o.wg)(),(0,o.j4)(r,{key:4,class:"special-badge ion-margin-start"},{default:(0,o.w5)((()=>[(0,o.Uk)((0,a.zw)(e.$t("badges.special")),1)])),_:1})):(0,o.kq)("",!0)])):(0,o.kq)("",!0),"ferry"===e.route.type?((0,o.wg)(),(0,o.iD)("div",S,["KAITO"==e.route.district?((0,o.wg)(),(0,o.j4)(r,{key:0,class:"hki-badge ion-margin-start"},{default:(0,o.w5)((()=>[(0,o.Uk)((0,a.zw)(e.$t("badges.kaito")),1)])),_:1})):(0,o.kq)("",!0),"OUTLYING"==e.route.district?((0,o.wg)(),(0,o.j4)(r,{key:1,class:"kln-badge ion-margin-start"},{default:(0,o.w5)((()=>[(0,o.Uk)((0,a.zw)(e.$t("badges.outlying")),1)])),_:1})):(0,o.kq)("",!0),"INNER"==e.route.district?((0,o.wg)(),(0,o.j4)(r,{key:2,class:"nt-badge ion-margin-start"},{default:(0,o.w5)((()=>[(0,o.Uk)((0,a.zw)(e.$t("badges.inner")),1)])),_:1})):(0,o.kq)("",!0)])):(0,o.kq)("",!0)],64)}var O=(0,o.aZ)({name:"Badges-component",props:["route"],components:{IonBadge:y.yp},mount(e){console.log("setup called");const t=(0,g.iH)(e.route);return{route:t}}}),z=i(3744);const U=(0,z.Z)(O,[["render",W],["__scopeId","data-v-79aad7cf"]]);var $=U,q=i(7942),j=i(9483),v=i.n(j),R=i(6009);const L={ref:"keypad"},x={id:"summary-tag"},A={class:"grid keypad-wrapper"},T={class:"numbers"},D={class:"letters"};function M(e,t,i,n,s,l){const r=(0,o.up)("ion-icon"),d=(0,o.up)("ion-text"),c=(0,o.up)("ion-button"),u=(0,o.up)("ion-row");return(0,o.wg)(),(0,o.iD)("div",null,[(0,o._)("details",L,[(0,o._)("summary",x,[(0,o.Wm)(d,{color:"primary"},{default:(0,o.w5)((()=>[(0,o.Wm)(r,{icon:n.keypadOutline,class:"ion-margin-end keypad-icon"},null,8,["icon"]),(0,o.Uk)(" "+(0,a.zw)(e.$t("searchView.toggleRouteKeypad")),1)])),_:1})]),(0,o._)("div",A,[(0,o._)("div",T,[(0,o._)("div",null,[(0,o.Wm)(u,{class:"ion-justify-content-around ion-align-items-center"},{default:(0,o.w5)((()=>[(0,o.Wm)(c,{fill:"clear",size:"4",disabled:!n.numpad[1],onClick:t[0]||(t[0]=e=>l.emitClick(1))},{default:(0,o.w5)((()=>[(0,o.Uk)("1")])),_:1},8,["disabled"]),(0,o.Wm)(c,{fill:"clear",size:"4",disabled:!n.numpad[2],onClick:t[1]||(t[1]=e=>l.emitClick(2))},{default:(0,o.w5)((()=>[(0,o.Uk)("2")])),_:1},8,["disabled"]),(0,o.Wm)(c,{fill:"clear",size:"4",disabled:!n.numpad[3],onClick:t[2]||(t[2]=e=>l.emitClick(3))},{default:(0,o.w5)((()=>[(0,o.Uk)("3")])),_:1},8,["disabled"])])),_:1}),(0,o.Wm)(u,{class:"ion-justify-content-around ion-align-items-center"},{default:(0,o.w5)((()=>[(0,o.Wm)(c,{fill:"clear",size:"4",disabled:!n.numpad[4],onClick:t[3]||(t[3]=e=>l.emitClick(4))},{default:(0,o.w5)((()=>[(0,o.Uk)("4")])),_:1},8,["disabled"]),(0,o.Wm)(c,{fill:"clear",size:"4",disabled:!n.numpad[5],onClick:t[4]||(t[4]=e=>l.emitClick(5))},{default:(0,o.w5)((()=>[(0,o.Uk)("5")])),_:1},8,["disabled"]),(0,o.Wm)(c,{fill:"clear",size:"4",disabled:!n.numpad[6],onClick:t[5]||(t[5]=e=>l.emitClick(6))},{default:(0,o.w5)((()=>[(0,o.Uk)("6")])),_:1},8,["disabled"])])),_:1}),(0,o.Wm)(u,{class:"ion-justify-content-around ion-align-items-center"},{default:(0,o.w5)((()=>[(0,o.Wm)(c,{fill:"clear",size:"4",disabled:!n.numpad[7],onClick:t[6]||(t[6]=e=>l.emitClick(7))},{default:(0,o.w5)((()=>[(0,o.Uk)("7")])),_:1},8,["disabled"]),(0,o.Wm)(c,{fill:"clear",size:"4",disabled:!n.numpad[8],onClick:t[7]||(t[7]=e=>l.emitClick(8))},{default:(0,o.w5)((()=>[(0,o.Uk)("8")])),_:1},8,["disabled"]),(0,o.Wm)(c,{fill:"clear",size:"4",disabled:!n.numpad[9],onClick:t[8]||(t[8]=e=>l.emitClick(9))},{default:(0,o.w5)((()=>[(0,o.Uk)("9")])),_:1},8,["disabled"])])),_:1}),(0,o.Wm)(u,{class:"ion-justify-content-around ion-align-items-center"},{default:(0,o.w5)((()=>[(0,o.Wm)(c,{class:"icon-button",fill:"clear",size:"4",disabled:0===i.query.length,onClick:t[9]||(t[9]=e=>l.emitClick("clear"))},{default:(0,o.w5)((()=>[(0,o.Wm)(r,{slot:"icon-only",icon:n.trashBinOutline},null,8,["icon"])])),_:1},8,["disabled"]),(0,o.Wm)(c,{fill:"clear",size:"4",disabled:!n.numpad[0],onClick:t[10]||(t[10]=e=>l.emitClick(0))},{default:(0,o.w5)((()=>[(0,o.Uk)("0")])),_:1},8,["disabled"]),(0,o.Wm)(c,{class:"icon-button",fill:"clear",size:"4",disabled:0===i.query.length,onClick:t[11]||(t[11]=e=>l.emitClick("back"))},{default:(0,o.w5)((()=>[(0,o.Wm)(r,{slot:"icon-only",icon:n.backspaceOutline},null,8,["icon"])])),_:1},8,["disabled"])])),_:1})])]),(0,o._)("div",D,[((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)(n.letterRow,((e,t)=>((0,o.wg)(),(0,o.j4)(c,{fill:"clear",key:t,onClick:t=>l.emitClick(e.letter)},{default:(0,o.w5)((()=>[(0,o.Uk)((0,a.zw)(e.letter),1)])),_:2},1032,["onClick"])))),128))])])],512)])}const B=(e,t,i,o,a=20)=>{let n=[];return"ferry"===t?n=e.filter((e=>1===e.direction&&(e.routeNameTC.includes(i)||e.routeNameEN.toLowerCase().includes(i.toLowerCase())))):"zh"===o&&i<10?n=e.filter((e=>e.routeNo.length<=2&&0===e.routeNo.indexOf(i.toUpperCase())||e.destTC.includes(i))):"zh"===o?n=e.filter((e=>0===e.routeNo.indexOf(i.toUpperCase())||e.destTC.toLowerCase().includes(i.toLowerCase()))):"en"===o&&i<10?n=e.filter((e=>e.routeNo.length<=2&&0===e.routeNo.indexOf(i.toUpperCase())||e.destEN.includes(i))):"en"===o&&(n=e.filter((e=>0===e.routeNo.indexOf(i.toUpperCase())||e.destEN.toLowerCase().includes(i.toLowerCase())))),n=n.sort((function(e,t){return e=Number(e.routeNo.replace(/[A-Z]/g,0)),t=Number(t.routeNo.replace(/[A-Z]/g,0)),e-t})),n.slice(0,a)},H=e=>{const t=new Set(e.map((e=>e.routeNo)).filter((e=>e.length<=5)));return Array.from(t)},V=e=>{const t=/([A-Za-z])/g,i=new Set;for(let o of e)o.match(t)&&o.match(t).forEach((e=>i.add(e)));return Array.from(i).sort().map((e=>({letter:e,enable:!1})))},E=(e,t)=>{const i=e.filter((e=>0===e.indexOf(t)&&e.length>t.length));let o=new Set,a={0:!1,1:!1,2:!1,3:!1,4:!1,5:!1,6:!1,7:!1,8:!1,9:!1};for(let s of i){let e=s[t.length];e.match(/\d/)?a[e]=!0:o.add(e)}const n=Array.from(o).sort(((e,t)=>e.localeCompare(t))).map((e=>({letter:e,enabled:!0})));return{numberState:a,letterState:n}};var Z=!1;function K(e,t,i){return Array.isArray(e)?(e.length=Math.max(e.length,t),e.splice(t,1,i),i):(e[t]=i,i)}function P(e,t){Array.isArray(e)?e.splice(t,1):delete e[t]}const F="undefined"!==typeof window&&"undefined"!==typeof document,J=(Object.prototype.toString,(e,t)=>Object.prototype.hasOwnProperty.call(e,t));function Q(e){const t=Object.create(null);return i=>{const o=t[i];return o||(t[i]=e(i))}}const Y=/\B([A-Z])/g,G=(Q((e=>e.replace(Y,"-$1").toLowerCase())),/-(\w)/g);Q((e=>e.replace(G,((e,t)=>t?t.toUpperCase():""))));F&&window,F&&window.document,F&&window.navigator,F&&window.location;"undefined"!==typeof globalThis?globalThis:"undefined"!==typeof window?window:"undefined"!==typeof global?global:"undefined"!==typeof self&&self;function X(){const e=(0,g.qj)({});return{get:t=>e[t],set:(t,i)=>K(e,t,i),has:t=>J(e,t),delete:t=>P(e,t),clear:()=>{Object.keys(e).forEach((t=>{P(e,t)}))}}}function ee(e,t){const i=()=>(null==t?void 0:t.cache)?(0,g.qj)(t.cache):Z?X():(0,g.qj)(new Map),o=i(),a=(...e)=>(null==t?void 0:t.getKey)?t.getKey(...e):JSON.stringify(e),n=(t,...i)=>(o.set(t,e(...i)),o.get(t)),s=(...e)=>n(a(...e),...e),l=(...e)=>{o.delete(a(...e))},r=()=>{o.clear()},d=(...e)=>{const t=a(...e);return o.has(t)?o.get(t):n(t,...e)};return d.load=s,d.delete=l,d.clear=r,d.generateKey=a,d.cache=o,d}Number.POSITIVE_INFINITY;var te={name:"ComponentName",components:{IonRow:y.Nd,IonButton:y.YG,IonIcon:y.gu,IonText:y.yW},props:["data","query","keypadOpen"],emits:["padClick"],setup(){const e={0:!1,1:!1,2:!1,3:!1,4:!1,5:!1,6:!1,7:!1,8:!1,9:!1},t=(0,g.iH)(e),i=(0,g.iH)([]),o=(0,g.iH)([]),a=ee(E,{getKey:(e,t)=>t});return{numpad:t,letterRow:i,routeNoList:o,memoUpdateButton:a,backspaceOutline:f.RtN,trashBinOutline:f.Ub0,keypadOutline:f.JW_}},mounted(){},methods:{hydrateList:function(){this.routeNoList=H(this.data),this.letterRow=V(this.routeNoList)},emitClick:function(e){this.$emit("padClick",e)}},watch:{data(e){if(e.length){this.hydrateList();const e=this.memoUpdateButton(this.routeNoList,"");this.letterRow=e.letterState,this.numpad=e.numberState}},query:function(e){const t=this.memoUpdateButton(this.routeNoList,e);this.letterRow=t.letterState,this.numpad=t.numberState},keypadOpen(){this.$refs.keypad.open=!1}},beforeUnmount(){this.memoUpdateButton.clear()}};const ie=(0,z.Z)(te,[["render",M],["__scopeId","data-v-217bfcf6"]]);var oe=ie,ae=(0,o.aZ)({components:{IonHeader:y.Gu,IonToolbar:y.sr,IonContent:y.W2,IonText:y.yW,IonPage:y._i,IonSearchbar:y.VI,IonItem:y.Ie,IonLabel:y.Q$,IonList:y.q_,IonListHeader:y.yh,IonModal:y.ki,IonGrid:y.jY,IonRow:y.Nd,IonCol:y.wI,Badges:$,IonButton:y.YG,IonIcon:y.gu,IonTitle:y.wd,IonButtons:y.Sm,ETAPopup:b.Z,OptionView:C.Z,News:_.Z,Keypad:oe,IonReorder:y.Nh,IonReorderGroup:y.oz},name:"SearchView",props:["dataType"],setup(e){const t=(0,g.iH)(""),i=(0,g.iH)([]),a=(0,g.iH)({}),n=(0,g.iH)([]),s=(0,g.iH)(!1),l=(0,g.iH)(!1),r=(0,g.iH)(!1),d=(0,g.iH)([]),c=(0,g.iH)([]),u=(0,g.iH)(e.dataType),p=(0,g.iH)(!1),m=(0,g.iH)(!0),w=(0,g.iH)(!1),h=ee(B,{getKey:(e,t,i,o,a)=>`${i.toUpperCase()}-${o}-${a}`});addEventListener("ionModalDidDismiss",(function(){s.value=!1}));const y=(0,o.f3)("globalConfig");return{data:d,memoFilterQuery:h,query:t,displayArray:i,itemSelected:a,keypadOpen:w,altRoutes:n,config:y,modalIsOpen:s,optionIsOpen:l,newsIsOpen:r,disableReorder:m,starred:c,type:u,dataReady:p,cog:f.Mjo,chevronBack:f.Mny,swapVerticalOutline:f.CLz,newspaperOutline:f.U7$}},methods:{openModal(e){this.itemSelected=JSON.parse(JSON.stringify(this.displayArray[e])),console.log(this.itemSelected),this.getAltRoutes(),this.modalIsOpen=!0},openAltModal(e){let t=this.displayArray[e],i=this.data.findIndex((e=>e.routeId===t.routeId&&e.direction!=t.direction));-1!=i?(this.itemSelected=JSON.parse(JSON.stringify(this.data[i])),console.log(this.itemSelected),this.getAltRoutes(),this.modalIsOpen=!0):((0,R.Z)("info","未找到相關方向，正在顯示順行"),this.openModal(e))},closeModal(){this.modalIsOpen=!1},openOption(){this.optionIsOpen=!0},openNews(){this.newsIsOpen=!0},closeOption(){this.optionIsOpen=!1},closeNews(){this.newsIsOpen=!1},async addStar(){this.starred.push(this.itemSelected),await this.saveStar()},async removeStar(){const e=this.starred.findIndex((e=>e.routeId===this.itemSelected.routeId&&e.direction===this.itemSelected.direction));this.starred.splice(e,1),await this.saveStar()},async saveStar(){const e=await v().getItem("starred"),t={...e,[this.type]:JSON.parse(JSON.stringify(this.starred))};await v().setItem("starred",t)},hideKeypad(){this.keypadOpen=!this.keypadOpen},currentSelectedItem(e){return e.routeId==this.itemSelected.routeId&&e.routeDirection==this.itemSelected.routeDirection},filterQuery(e){let t=[];return""===e?this.starred:"ferry"!=this.type?(t="zh"===this.$i18next.language?e<10?this.data.filter((t=>t.routeNo.length<=2&&0==t.routeNo.indexOf(e.toUpperCase())||t.destTC.includes(e))):this.data.filter((t=>0==t.routeNo.indexOf(e.toUpperCase())||t.destTC.includes(e))):e<10?this.data.filter((t=>t.routeNo.length<=2&&0==t.routeNo.indexOf(e.toUpperCase())||t.destEN.toLowerCase().includes(e.toLowerCase()))):this.data.filter((t=>0==t.routeNo.indexOf(e.toUpperCase())||t.destEN.toLowerCase().includes(e.toLowerCase()))),t=t.sort((function(e,t){return e=Number(e.routeNo.replace(/[A-Z]/g,0)),t=Number(t.routeNo.replace(/[A-Z]/g,0)),e-t})),t.slice(0,50)):void(t=this.data.filter((t=>1==t.direction&&(t.routeNameTC.includes(e)||t.routeNameEN.toLowerCase().includes(e.toLowerCase())))))},padUpdateQuery(e){"clear"===e?this.clearQuery():this.query="back"===e?this.query.substring(0,this.query.length-1):`${this.query}${e}`},listAll(){this.query=" "},clearQuery(){this.query=""},async swapDirection(e=void 0){e?(this.modalIsOpen=!1,await(0,q.Z)(100),this.itemSelected=JSON.parse(JSON.stringify(e)),this.getAltRoutes(),this.modalIsOpen=!0,console.log(this.itemSelected)):(0,R.Z)("error","此路線未有對頭車")},getAltRoutes(){"bus"==this.itemSelected.type&&this.itemSelected.company.includes("KMB")?this.altRoutes=this.data.filter((e=>e.routeNo==this.itemSelected.routeNo&&e.company.join("")==this.itemSelected.company.join("")&&(e.direction!=this.itemSelected.direction||e.serviceMode!=this.itemSelected.serviceMode||e.specialType!=this.itemSelected.specialType))):"bus"==this.itemSelected.type&&this.itemSelected.company.includes("NLB")?this.altRoutes=this.data.filter((e=>e.company.includes("NLB")&&e.routeNo==this.itemSelected.routeNo&&e.routeId!=this.itemSelected.routeId)):"bus"==this.itemSelected.type?this.altRoutes=this.data.filter((e=>e.company.join("")==this.itemSelected.company.join("")&&e.routeNo==this.itemSelected.routeNo&&(e.routeId!=this.itemSelected.routeId||e.direction!=this.itemSelected.direction))):"minibus"==this.itemSelected.type?this.altRoutes=this.data.filter((e=>e.routeNo==this.itemSelected.routeNo&&e.district==this.itemSelected.district&&(e.routeId!=this.itemSelected.routeId||e.direction!=this.itemSelected.direction))):this.altRoutes=this.data.filter((e=>e.routeId==this.itemSelected.routeId&&e.direction!=this.itemSelected.direction))},toggleReorder(){this.disableReorder=!this.disableReorder},async reorder(e){e.detail.complete(this.starred),await this.saveStar()}},async mounted(){this.data=await(0,k.FS)(this.type);let e=await v().getItem("starred");e&&e[this.type]?this.starred=e[this.type]:this.starred=[],this.displayArray=this.starred,this.dataReady=!0},watch:{query(e){this.displayArray=""===e?this.starred:this.memoFilterQuery(this.data,this.type,e,this.$i18next.language,this.config.maxResults),this.disableReorder=!0}},computed:{checkNoEta(){return"ferry"==this.type||"tram"==this.type}},unmounted(){this.memoFilterQuery.clear()}});const ne=(0,z.Z)(ae,[["render",h],["__scopeId","data-v-f0c9c3d4"]]);var se=ne}}]);
//# sourceMappingURL=889.e158a8db.js.map